// =============================================================================
// Print.scss
// -----------------------------------------------------------------------------
// Component print styles should be defined inside print media queries at the
// component level. This stylesheet is for overrides and other special-case
// rules which don't properly fit anywhere else and only show up in print.
// $print-width: 8.5in;
// $print-height: 11in;
// $print-bottom-margin: 0.875in;
// $print-top-margin: 0.75in;
// $print-inner-margin: 1in;
// $print-outer-margin: 0.75in;
// $print-bleed: .125in;

$splash-page-width: calc(#{$print-width} + #{$print-bleed} + #{$print-bleed});

$splash-page-height: calc(#{$print-height} + #{$print-bleed} + #{$print-bleed});

$print-footer-font: $quire-headings-font;
$print-footer-font-size: 8pt;


@media print {    
  // @page {
  //   @bottom {}
  // }

  @page {
    size: $print-width $print-height;
    prince-bleed: .125in;
    bleed: .125in;
    prince-trim: 0.25in;
    marks: crop;
    margin-top: $print-top-margin;
    margin-bottom: $print-bottom-margin;

    @bottom-right-corner {
      font-family: $print-footer-font;
      font-size: $print-footer-font-size;
    }

    @bottom-right {
      font-family: $print-footer-font;
      font-size: $print-footer-font-size;
      color: $quire-print-text-color;
      // TEMPORARY TO TEST PDF LAYOUT
      // border: 1pt solid Red !important;
    }

    @bottom-center {
      font-family: $print-footer-font;
      font-size: $print-footer-font-size;
    }

    @bottom-left {
      font-family: $print-footer-font;
      font-size: $print-footer-font-size;
      color: $quire-print-text-color;
      // TEMPORARY TO TEST PDF LAYOUT
      // border: 1pt solid Blue !important;
    }

    @bottom-left-corner {
      font-family: $print-footer-font;
      font-size: $print-footer-font-size;
    }
  }

  @page:left {
    margin-left: $print-outer-margin;
    margin-right: $print-inner-margin;

    @bottom-right {
      content: string(sectiontitle);
      text-transform: uppercase;
      letter-spacing: 1pt;
      font-size: 7.5pt;
      
    }

    @bottom-left {
      content: counter(page);
    }
  }

  @page:left:first {
    @bottom-right {
      content: none;
    }
  }

  @page:right {
    margin-left: $print-inner-margin;
    margin-right: $print-outer-margin;

    @bottom-left {
      content: string(pagetitle);
    }

    @bottom-right {
      text-align: right;
      content: counter(page);
    }
  }

  @page:right:first {
    @bottom-left {
      content: none;
    }
  }

  @page frontmatter:left {
    @bottom-left {
      content: counter(page, lower-roman);
      //border: 1pt solid #ff0000 !important;
    }
  }

  @page frontmatter:right {
    @bottom-right {
      text-align: right;
      content: counter(page, lower-roman);
      //border: 1pt solid #ff0000 !important;
    }
  }
  
  @page frontmatter-splash:left {
    background-color: $print-splash-color;
    @bottom-left {
      content: counter(page, lower-roman);
      //border: 1pt solid #ff0000 !important;
    }
  }
  
  @page frontmatter-splash:right {
    background-color: $print-splash-color;
    @bottom-right {
      text-align: right;
      content: counter(page, lower-roman);
      //border: 1pt solid #ff0000 !important;
    }
  }
  
  @page splash {
    background-color: $print-splash-color;
  }
  
  @page entry-image {
    background-color: $print-entry-image-color;
    @bottom-left {
      content: none;
    }
    @bottom-right {
      content: none;
    }
  }
  
  // html,
  // body,
  // .quire,
  // .quire-primary,
  // article {
  //   background-color: transparent;
  // }
  
  @page splash-image {
    
    // color: findColorInvert($accent-color);
    margin-top: 0;
    margin-bottom: -$print-bleed;
    margin-left: 0;
    margin-right: 0;

    @bottom-left {
      content: none;
    }

    @bottom-right {
      content: none;
    }
  }

  @page no-footer {

    @bottom-right {
      content: none;
    }

    @bottom-left {
      content: none;
    }
  }

  @page page-one:first {
    @bottom-left {
      content: none;
    }

    @bottom-left {
      content: none;
    }
  }
  
  @page:blank {
    @bottom-left {
      content: normal;
    }
    @bottom-right {
      content: normal;
    }
  }
  @page frontmatter:blank {
    @bottom-left {
      content: normal;
    }
    @bottom-right {
      content: normal;
    }
  }
  @page splash:blank {
    @bottom-left {
      content: normal;
    }
    @bottom-right {
      content: normal;
    }
  }
  @page frontmatter-splash:blank {
    @bottom-left {
      content: normal;
    }
    @bottom-right {
      content: normal;
    }
  }
  
  .remove-from-epub {
    display: none;
  }

  // .quire-current-page__title {
  //   string-set: pagetitle content();
  // }
  
  .pdf-page-title {
    string-set: pagetitle content();
  }

  .pdf-page-section {
    string-set: sectiontitle content();
  }

  .quire-contents-list {
    .page-item {
      a::after {
        content: leader(dotted) ' 'target-counter(attr(href, url), page);
        margin-left: 6pt; // This border is a hack for PrinceXML which doesn't
        // otherwise recognize the box sizing for some reason
        border: 1pt solid transparent;
      }
      a.frontmatter-page::after {
        content: leader(dotted) ' 'target-counter(attr(href, url), page, lower-roman);
        font-style: italic;
        margin-left: 6pt; // This border is a hack for PrinceXML which doesn't
        // otherwise recognize the box sizing for some reason
        border: 1pt solid transparent;
      }
    }
    &.grid {
      .page-item {
        a::after {
          position: absolute;
          bottom: 1em;
          right: 1em;
          font-size: .75em;
        }
        a.frontmatter-page::after {
          position: absolute;
          bottom: 1em;
          right: 1em;
          font-size: .75em;
        }
      }
    }
  }
  
  // .half-title-page,
  // .title-page {
  //   page: no-footer;
  // }
  
  // #half-title,
  // #title {
  //   page: frontmatter;
  // }

  .quire-page--page-one {
    page: page-one;
    counter-reset: page 1;
    page-break-before: right;
  }

  .quire-page--frontmatter {
    page: frontmatter;
  }
  
  .quire-splash {
    page: splash;
    background-color: $print-splash-color;
    .quire-page__header.hero-image {
      page: splash-image;
    }
  }
  
  .quire-splash.quire-page--frontmatter {
    page: frontmatter-splash;
  }
  
  body {
    // page: accent;
    // background-color: LightYellow;
    // TEMPORARY TO TEST PDF LAYOUT
    // border: 1px solid Green;
    // .quire .quire__primary #main {
    //   background: transparent !important;
    // }
    // #main {
    //   background: transparent !important;
    // }
  }
  

.quire-entry__image {
  // TEMPORARY TO TEST PDF LAYOUT
  // border: 1pt solid Blue !important;
  .quire-entry__image__group-container {
    figure {      
      @if $print-entry-image-display == first {
        display: none;
        &:first-of-type {
          display: block;
        }
      }
      break-after: page;
      width:100%;
      text-align: center;
      page: entry-image;
      // TEMPORARY TO TEST PDF LAYOUT
      // border: 1pt solid Red !important;
        .quire-figure__media-fallback {
          .placeholder {
            width: 500px;
            height: 250px;
            i {
              color: $white;
              font-size: 100px;
            }
          }
          // border: 1pt solid #2bff00 !important;
          .quire-figure__wrapper {
            // border: 1pt solid #ffa600 !important;
            img {
              // border: 1pt solid #ff00ff !important;
              width: 100%;
            }
          }
        }
      }
    }
  }

  .quire-cover,
  .quire-contents {
    page: no-footer;
  }

  .quire-splash { 
    // .quire-page__header[style] {
    //   page: splash;
    //   background-color: $accent-color;
    //   color: findColorInvert($accent-color);
    //   width: 8.75in;
    //   height: 11.25in;
    //   margin: -$print-bleed;
    //   .hero-body {
    //     margin-top: 3in;
    //   }
    // }
  }

  .quire-page,
  .hero.quire-page__header,
  .hero-body,
  .section.quire-page__content {
    // This border is a hack for PrinceXML which doesn't
    // otherwise recognize the box sizing for some reason
    //border: 1pt solid transparent !important;
    // border: 1px solid red !important;
  }

  // TEMPORARY TO TEST PDF LAYOUT
  // Use to better test and style layout of pages
  .quire-page {
    // border: 1pt solid #ff0000 !important;
    // margin: 0 auto;
  }

  .container {
    //border: 1pt solid #ffff00 !important;
    // margin: 0 auto;
  }

  .content {
    //border: 1pt solid #00ffff !important;
    // margin: 0 auto;
    // padding: 0;
  }

  .is-screen-only {
    display: none;
  }

  html body {

    // Leaflet stuff
    .leaflet-pane,
    .leaflet-map-pane,
    .leaflet-container,
    .lvml {
      display: none !important;
    }

    .button,
    .input,
    .textarea,
    .select,
    .visually-hidden,
    .footnote-return {
      display: none;
    }
  }

  .menu-list li ul {
    border-left-width: 0;
  }

  // .section {
  //   padding: 0;
  // }

  // .container {
  //   max-width: 100%;
  //   margin: 0;
  // }

.entry-image-wrap {
  width: 100%;
  column-span: all;
  display: block;
  break-before: page;
  margin-bottom: 0.5em;
}

.bd-structure {
  padding: 1.5rem;
}

.title-page {
  // column-span: all;
  // break-after: page;
  text-align: right;

  span {
    display: block;
  }

  .title-tp {
    font-size: 3em;
    /** approx 48px **/
    line-height: 1.04em;
    /** approx 50px **/
  }

  .sub-title {
    font-size: 1.75em;
    /** approx 28px **/
    line-height: 1.15em;
    /** approx 32px **/
  }

  .contributor {
    font-size: 1.125em;
    /** approx 18px **/
    line-height: 1.22em;
    /** approx 22px **/
  }

  .publisher {
    font-size: 1.125em;
    /** approx 18px **/
    line-height: 1.22em;
    /** approx 22px **/
  }
}

.half-title-page {
  font-family: $quire-headings-font;
  
  // column-span: all;

  text-align: right;
  // break-after: page;

  span {
    display: block;
  }

  .title-htp {
    margin-top: 2.5in;
    font-size: 1.5em;
    /** approx 28px **/
    // line-height: 1.15em;
    /** approx 32px **/
  }

  .sub-title {
    display: none;
    font-size: 1.125em;
    /** approx 18px **/
    line-height: 1.22em;
    /** approx 22px **/
  }
}

/** PRINT ELEMENTS **/

.media-caption {

}

.time-length {
  font-size: .875em;
  width: 100%;
}

.fig-print {
  font-size: .75em;
  background: $black-semi-transparent;
  position: absolute;
  padding: 0 9px 0 3px;
  left: 0;
  top: 0;
  color: $white;
  display: block;
}

// .quire-figure__media-wrapper--widescreen {
//   padding-bottom: 0;
//   position: inherit;
// }

#content>div.container>div>figure:nth-child(11)>div:nth-child(1) .quire-figure--group-pdf {
  color: #fff;
}

}