#!/usr/bin/env node
var quire=function(t){"use strict";function e(t,e){return t(e={exports:{}},e.exports),e.exports}var _=e(function(t){var e=function(o){var u,t=Object.prototype,s=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},i=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",r=e.toStringTag||"@@toStringTag";function a(t,e,n,r){var i=e&&e.prototype instanceof c?e:c,o=Object.create(i.prototype),a=new O(r||[]);return o._invoke=function(o,a,c){var u=l;return function(t,e){if(u===p)throw new Error("Generator is already running");if(u===d){if("throw"===t)throw e;return j()}for(c.method=t,c.arg=e;;){var n=c.delegate;if(n){var r=k(n,c);if(r){if(r===v)continue;return r}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(u===l)throw u=d,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);u=p;var i=f(o,a,c);if("normal"===i.type){if(u=c.done?d:h,i.arg===v)continue;return{value:i.arg,done:c.done}}"throw"===i.type&&(u=d,c.method="throw",c.arg=i.arg)}}}(t,n,a),o}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}o.wrap=a;var l="suspendedStart",h="suspendedYield",p="executing",d="completed",v={};function c(){}function g(){}function y(){}var m={};m[i]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(P([])));w&&w!==t&&s.call(w,i)&&(m=w);var x=y.prototype=c.prototype=Object.create(m);function S(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function _(u){var e;this._invoke=function(n,r){function t(){return new Promise(function(t,e){!function e(t,n,r,i){var o=f(u[t],u,n);if("throw"!==o.type){var a=o.arg,c=a.value;return c&&"object"==typeof c&&s.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):Promise.resolve(c).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,i)})}i(o.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function k(t,e){var n=t.iterator[e.method];if(n===u){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=u,k(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var r=f(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,v;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=u),e.delegate=null,v):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function F(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function P(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(s.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=u,t.done=!0,t};return r.next=r}}return{next:j}}function j(){return{value:u,done:!0}}return g.prototype=x.constructor=y,y.constructor=g,y[r]=g.displayName="GeneratorFunction",o.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},o.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,r in t||(t[r]="GeneratorFunction")),t.prototype=Object.create(x),t},o.awrap=function(t){return{__await:t}},S(_.prototype),_.prototype[n]=function(){return this},o.AsyncIterator=_,o.async=function(t,e,n,r){var i=new _(a(t,e,n,r));return o.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},S(x),x[r]="Generator",x[i]=function(){return this},x.toString=function(){return"[object Generator]"},o.keys=function(n){var r=[];for(var t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},o.values=P,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(F),!t)for(var e in this)"t"===e.charAt(0)&&s.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=u)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=u),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=s.call(i,"catchLoc"),c=s.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),F(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;F(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=u),v}},o}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}});function u(t,e,n,r,i,o,a){try{var c=t[o](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,i)}var c=function(c){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=c.apply(t,a);function i(t){u(r,e,n,i,o,"next",t)}function o(t){u(r,e,n,i,o,"throw",t)}i(void 0)})}};var s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t},n=e(function(e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(t){return n(t)}:e.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(t)}e.exports=r});var i=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};var l=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?i(t):e},h=e(function(e){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}e.exports=n}),o=e(function(n){function r(t,e){return n.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}n.exports=r});function a(t,e){e.fail("".concat(t)),process.exit(1),removeHTML()}var p=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)},d=require("events"),v=require("util"),g=require("fs-extra"),y=v.promisify(g.writeFile),m=require("rimraf"),b=require("sanitize-html"),w=(require("path"),require("cheerio")),k=function(t){function r(t,e){var n;return s(this,r),(n=l(this,h(r).call(this))).data=t,n.spinner=e,n.data&&c(_.mark(function t(){return _.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.buildEpubFiles(n.data);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),a(t.t0,n.spinner);case 8:case"end":return t.stop()}},t,null,[[0,5]])}))(),n}var e;return p(r,d),f(r,[{key:"removeHTML",value:function(){m("html/",function(){return!0})}},{key:"createReformatedHashLinkArrAndcreateLinkArr",value:function(n){return new Promise(function(t,e){if(""===n)e(new Error("Something went wrong. Please try again."),null);else{var r=[],i=[];n.pages.forEach(function(t){var e=void 0!==t.reformatedHashLinkArr?t.reformatedHashLinkArr:"";r.push(e);var n=void 0!==t.linkTitleArr?t.linkTitleArr:"";i.push(n)}),t([i,r])}})}},{key:"buildMetadata",value:function(f){return new Promise(function(t,e){if(""===f)e(new Error("Something went wrong. Please try again."),null);else if(void 0===f.title||null===f.title||""===f.title)e(new Error("A title for your publication must be specified in the publication.yml file."),null);else if(void 0===f.language||null===f.language||""===f.language)e(new Error("A language for your publication must be specified in the publication.yml file."),null);else{delete f.pages;var n="";for(var r in f)if(void 0!==f[r]&&null!==f[r]&&"string"!=typeof f[r]){if(0<f[r].length){var i=f[r];if("creators"===r){for(var o in i)if(i.hasOwnProperty(o)&&void 0!==i[o]&&null!==i[o]&&""!==i[o]){var a=i[o];!0===a.fullname?n+='<dc:creator opf:role="'.concat(a.role,'">').concat(a.name,"</dc:creator>"):n+='<dc:creator opf:file-as="'.concat(a["file-as"],'" opf:role="').concat(a.role,'">').concat(a.name,"</dc:creator>")}}else if("contributors"===r){for(var c in i)if(i.hasOwnProperty(c)&&void 0!==i[c]&&null!==i[c]&&""!==i[c]){var u=i[c];!0===u.fullname?n+='<dc:contributor opf:role="'.concat(u.role,'">').concat(u.name,"</dc:contributor>"):n+='<dc:contributor opf:file-as="'.concat(u["file-as"],'" opf:role="').concat(u.role,'">').concat(u.name,"</dc:contributor>")}}else for(var s in i)!i.hasOwnProperty(s)||void 0!==i[s]&&null!==i[s]&&""!==i[s]&&(n+="<dc:".concat(s,">").concat(i[s],"</dc:").concat(s,">"))}}else"title"===r||void 0!==f[r]&&null!==f[r]&&""!==f[r]&&(n+="<dc:".concat(r,">").concat(f[r],"</dc:").concat(r,">"));y("html/dc.xml",n),t(n)}})}},{key:"buildHTML",value:function(u,s,f){return new Promise(function(t,r){if(""===u||""===s||""===f)r(new Error("Something went wrong. Please try again."),null);else{var n=[];u.pages.forEach(function(t){var e=void 0!==t.body?t.body:"";n.push(e)});var e=n.join(" ");e=function(t){return t=b(t,{allowedTags:["h1","h2","h3","h4","h5","h6","blockquote","p","a","ul","ol","nl","li","b","i","strong","em","hr","br","div","table","thead","caption","tbody","tr","th","td","dl","dt","dd","pre","html","title","iframe","header","footer","body","form","img","meta","link","strike","code","main","article","section","aside","span","figure","sup","sub","figcaption"],allowedAttributes:{a:["href","name","target","class","id"],img:["src","width","height","class","id"],iframe:["src","width","height","class","id"],div:["id","class"],main:["id","class"],article:["id","class"],ul:["id","class"],ol:["id","class"],li:["id","class"],nav:["id","class"],meta:["name","content"],link:["rel","href"],p:["id","class"],h1:["id","class"],h2:["id","class"],h3:["id","class"],h4:["id","class"],h5:["id","class"],h6:["id","class"],span:["id","class"],sup:["id","class"],sub:["id","class"],figure:["id","class"],figcaption:["id","class"],blockquote:["id","class"],table:["id","class"],td:["id","class"],tr:["id","class"],th:["id","class"],dl:["id","class"],dt:["id","class"],dd:["id","class"],html:["id","class"],body:["id","class"],section:["id","class"],aside:["id","class"]},selfClosing:["br","hr","area","base","basefont","input","meta","img"],allowedSchemes:["http","https","ftp","mailto"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:[],allowProtocolRelative:!0,allowedIframeHostnames:["www.youtube.com","player.vimeo.com"]})}(e);var i="\n                <!DOCTYPE html>\n                <html>\n                  <head>\n                    <title>".concat(u.title,"</title>\n                  </head>\n                  <body>\n                    <div>\n                      ").concat(e,"\n                    </div>\n                  </body>\n                </html>\n                "),a=w.load(i,{decodeEntities:!1}),o=a("html"),c={};o.find("[id]").attr("id",function(t,e){return c[e]=(c[e]||0)+1,-1!==e.indexOf("fn-")||-1!==e.indexOf("fnref-")?e:1<c[e]?e="".concat(e,"-").concat(c[e]):e}),o.find(".remove-from-epub, .visually-hidden, .is-screen-only, .is-print-only").remove(),o.find(".quire-figure--group").each(function(t,e){var n=a(e).html();return a(e).replaceWith("".concat(n))}),o.find("figure").each(function(t,e){var n=void 0!==a(e).find("img").attr("id")?'id="'.concat(a(e).find("img").attr("id"),'"'):"",r=void 0!==a(e).find("img").attr("src")?'src="'.concat(a(e).find("img").attr("src"),'"'):"",i=null!==a(e).find("figcaption").html()?"<figcaption>".concat(a(e).find("figcaption").html(),"</figcaption>"):"";return a(e).replaceWith("<span ".concat(n,"></span><figure><img ").concat(r,"/>").concat(i,"</figure>"))}),o.find("a").attr("href",function(t,e){if(-1!==e.indexOf("empty")){var n=e.replace("#empty-","");r(new Error("Fragment identifier on page ".concat(n,' of <a href="#"></a> could not be found. Please correct this and try again.')),null)}return function(t,e){if(t.match(/^(https|http|www)/))return t;if(-1!==t.indexOf("#")){for(var n=t.split("#"),r=0;r<e.length;r++){var i=e[r].link.replace(/[^a-zA-Z0-9 ]/g,"");if(n[0].replace(/[^a-zA-Z0-9 ]/g,"")===i)return t="#".concat(n[1],"-").concat(e[r].title)}return t}for(var o=0;o<e.length;o++)if(t===e[o].link)return t="#".concat(e[o].title);return t}(e,s)}),o.find("sup").each(function(t,e){var n=a(e).attr(),r=a(e).html(),i=void 0!==n.class?'class="'.concat(n.class,'"'):"",o=void 0!==n.id?'id="'.concat(n.id,'"'):"";return a(e).replaceWith("<sup><span ".concat(i," ").concat(o,">").concat(r,"</span></sup>"))}),g.existsSync("epub/template.xhtml")?g.copyFileSync("epub/template.xhtml","html/template.xhtml"):y("html/template.xhtml",'<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE html>\n<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" $if(lang)$ xml:lang="$lang$" $endif$>\n\n<head>\n    <meta charset="utf-8" />\n    <meta name="generator" content="pandoc" />\n    <title>$pagetitle$</title>\n    <style type="text/css">\n        $if(quotes)$ q {\n            quotes: "“" "”" "‘" "’";\n        }\n\n        $endif$\n    </style>\n    $if(highlighting-css)$\n    <style type="text/css">\n        $highlighting-css$\n    </style>\n    $endif$ $for(css)$\n    <link rel="stylesheet" type="text/css" href="$css$" /> $endfor$ $for(header-includes)$ $header-includes$ $endfor$\n</head>\n<body$if(coverpage)$ id="cover" $endif$>\n    \n    $if(titlepage)$\n    <section epub:type="titlepage">\n        $for(title)$ $if(title.type)$\n        <h1 class="$title.type$">$title.text$</h1>\n        $else$\n        <h1 class="title">$title$</h1>\n        $endif$ $endfor$ $if(subtitle)$\n        <p class="subtitle">$subtitle$</p>\n        $endif$ $for(author)$\n        <p class="author">$author$</p>\n        $endfor$ $for(creator)$\n        <p class="$creator.role$">$creator.text$</p>\n        $endfor$ $if(publisher)$\n        <p class="publisher">$publisher$</p>\n        $endif$ $if(date)$\n        <p class="date">$date$</p>\n        $endif$ $if(rights)$\n        <div class="rights">$rights$</div>\n        $endif$\n    </section>\n    $else$ \n\n    $for(include-before)$ \n    $include-before$ \n    $endfor$ \n    \n    $body$ \n    \n    $for(include-after)$ \n    $include-after$ \n    $endfor$ \n\n    $endif$\n    </body>\n\n</html>'),y("html/epub.xhtml",o),t(a.html())}})}},{key:"buildEpubFiles",value:(e=c(_.mark(function t(n){var r,i=this;return _.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"./html",g.existsSync("./html")||g.mkdirSync("./html"),e.next=5,this.createReformatedHashLinkArrAndcreateLinkArr(n);case 5:return r=e.sent,e.next=8,this.buildHTML(n,r[0],r[1]);case 8:return e.next=10,this.buildMetadata(n);case 10:return e.abrupt("return",new Promise(function(t){t(!0)}));case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",new Promise(function(t){t(!0),a(e.t0,i.spinner)}));case 16:case"end":return e.stop()}},t,this,[[0,13]])})),function(t){return e.apply(this,arguments)})}]),r}(),x=require("cheerio"),S=require("path"),E=require("upath"),F=function(){function i(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{outputDir:"site",imageDir:"img"};s(this,i),this.config=n,this.epubTitle=e,this.$=x.load(t),this.content=this.$("#main")||this.$(".quire__primary__inner"),this.title=this.determineTitle(),this.chapterId=this.determineChapterId(),this.images=this.content.find("img"),this.links=this.content.find("a"),this.reformatedHashLinkArr="",this.reformatPage();var r={title:this.title,body:this.body(),reformatedHashLinkArr:this.reformatedHashLinkArr};return this.href()&&(r.linkTitleArr={},r.href=this.href(),r.linkTitleArr.link=this.santizeUrl(this.href()),r.linkTitleArr.title=this.pandocTitle(this.chapterId)),new Promise(function(t){t(r)})}return f(i,[{key:"santizeUrl",value:function(t){if(void 0!==t)return t=t.toLowerCase().trim().replace(".xhtml","").replace(/^\//,"").replace(/\/$/,"").replace(/\./g,"")}},{key:"pandocTitle",value:function(t){return(t=t!==this.epubTitle?t.replace(/[^a-zA-Z0-9 ]/g," "):t.replace(/\’/g,"").replace(/[^a-zA-Z0-9.]/g," ")).toLowerCase().replace(/\s\s+/g," ").trim().replace(/\s/g,"-")}},{key:"attrMatches",value:function(t,e,n){return this.$(t).attr(e).match(n)}},{key:"epubLink",value:function(t){if(t.match(/^(https|http|www)/))return t;if(-1!==t.indexOf("#"))return t;var e=E.normalize(t.replace("localhost:1313","")).replace(/^\//,"").replace(/\/$/,"").replace(/\./g,"").replace(/\’/g,"");return e=""!==e?"".concat(e):"#".concat(this.pandocTitle(this.epubTitle))}},{key:"determineTitle",value:function(){var t;return this.content.find("h1")?t=this.content.find("h1").text():this.content.find("h2")&&(t=this.content.find("h2").text()),t||"Cover"}},{key:"determineChapterId",value:function(){var t;return!this.content.find(".quire-contents-header > h1")||void 0!==this.content.find(".quire-contents-header > h1").attr("id")&&(t=this.content.find(".quire-contents-header > h1").attr("id")),!this.content.find("h1.quire-page__header__title")||void 0!==this.content.find("h1.quire-page__header__title").attr("id")&&(t=this.content.find("h1.quire-page__header__title").attr("id")),t||this.epubTitle}},{key:"body",value:function(){return this.$.xml(this.content)}},{key:"href",value:function(){var t=this.$('link[rel="canonical"]');return t?this.epubLink(t.attr("href")):null}},{key:"reformatPage",value:function(){var n,r,i=this;i.content.find('[id*=":"]').attr("id",function(t,e){return e.replace(":","-")}),i.images.attr("src",function(t,e){return"./"+S.resolve(S.join(i.config.outputDir,i.config.imageDir),e).replace(/\/localhost:1313/,i.config.outputDir)}),n={},r=[],i.links.not(function(t,e){return i.attrMatches(e,"href",/^#/)}).attr("href",function(t,e){return"".concat(i.epubLink(e))}),i.links.filter(function(t,e){return-1!==i.$(e).attr("href").indexOf("#")}).filter(function(t,e){return"#"!==i.$(e).attr("href").charAt(0)}).attr("href",function(t,e){return e.toLowerCase()}).attr("href",function(t,e){return decodeURIComponent(e)}).attr("href",function(t,e){return decodeURI(e)}).attr("href",function(t,e){return e.match(/^(https|http|www)/)?e:(e=e.replace("//localhost:1313","").replace(/^\//,"").replace(/\/$/,"").replace(":","-").replace(".","-").replace(/\s/g,"-"),r.push({internalLinksOtherPage:"#".concat(e)}),"".concat(e))}),i.links.filter(function(t,e){return i.attrMatches(e,"href",/^#/)}).filter(function(t,e){return-1===i.$(e).attr("href").indexOf("/")}).attr("href",function(t,e){return e.toLowerCase()}).attr("href",function(t,e){return decodeURIComponent(e)}).attr("href",function(t,e){return decodeURI(e)}).attr("href",function(t,e){return e.replace("#cover","#".concat(i.pandocTitle(i.epubTitle)))}).attr("href",function(t,e){return e!=="#".concat(i.pandocTitle(i.epubTitle))?e.replace(/[^a-zA-Z0-9 ]/g," "):e}).attr("href",function(t,e){return(e=e.substring(1)).replace(/\s\s+/g," ")}).attr("href",function(t,e){return e.replace(":","-")}).attr("href",function(t,e){return(e=(e=""!==e?e:"empty").replace(/\s/g,"-"))!=="".concat(i.pandocTitle(i.epubTitle))?(r.push({internalLinks:"#".concat(e,"-").concat(i.pandocTitle(i.chapterId)),mdPage:"".concat(i.pandocTitle(i.chapterId))}),"#".concat(e,"-").concat(i.pandocTitle(i.chapterId))):(r.push({internalLinks:"#".concat(e)}),"#".concat(e))}),"contents"===i.pandocTitle(i.title)&&i.links.filter(function(t,e){return i.attrMatches(e,"href",/^#/)}).attr("href",function(t,e){return n[e]=(n[e]||0)+1,1<n[e]?(r.push({tocInternalLinks:"".concat(e,"-").concat(n[e])}),e="".concat(e,"-").concat(n[e])):e}),i.reformatedHashLinkArr=r,i.content.find("h1").each(function(t,e){var n=i.$(e).attr("id");return n=void 0!==n?n.toLowerCase().replace(/[^a-zA-Z0-9 ]/g," ").replace(/\s\s+/g," ").replace(/\s/g,"-"):"cover",i.$(e).attr("id",n)}),i.content.find("[id]").not("h1").attr("id",function(t,e){return e.toLowerCase()}).attr("id",function(t,e){return e.replace(/[^a-zA-Z0-9 ]/g," ")}).attr("id",function(t,e){return e.replace(/\s\s+/g," ")}).attr("id",function(t,e){return e.replace(/\s/g,"-")}).attr("id",function(t,e){return"".concat(e,"-").concat(i.pandocTitle(i.chapterId))})}}]),i}(),O=require("fs"),P=require("command-exists").sync,j=require("js-yaml"),L=require("url").URL;function A(t){return j.safeLoad(O.readFileSync(t,"utf8"))}function T(t){return!P(t)}function M(e){if("string"==typeof e){-1===e.indexOf("://")&&-1<e.indexOf(":")&&(e="http://"+e);try{return new L(e).pathname}catch(t){if(t instanceof TypeError)return path.parse(e||"").name}}}function Wt(t){try{return!!t()}catch(t){return!0}}function I(t){return kt?_t.createElement(t):{}}function Vt(t,e){if(!Zt(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!Zt(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!Zt(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!Zt(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function zt(t){return"Symbol(".concat(void 0===t?"":t,")_",(++Ot+Pt).toString(36))}function $(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}var R=require("events"),N=require("lodash"),C=require("axios"),D=require("path"),q=require("url").URL,U=require("striptags"),B=function(t){function r(t,e){var n;return s(this,r),(n=l(this,h(r).call(this))).data=t,n.config=e,n.outputDir=n.config.outputDir||"site",n.imageDir=n.config.imageDir||"img",n}var e,n;return p(r,R),f(r,[{key:"title",value:function(){return this.data.subtitle&&this.data.reading_line?"".concat(this.data.title,": ").concat(this.data.subtitle," ").concat(this.data.reading_line):this.data.subtitle?"".concat(this.data.title,": ").concat(this.data.subtitle):"".concat(this.data.title)}},{key:"creators",value:function(){if(!this.data.contributor)return!1;var t=N.castArray(this.data.contributor).filter(function(t){return"primary"===t.type});return t.map(function(t){var e=t.full_name||"".concat(t.first_name," ").concat(t.last_name),n={name:e,role:"".concat(t.role||"aut")};return t.last_name&&t.first_name?n["file-as"]="".concat(t.last_name,", ").concat(t.first_name):(e=e.split(" "),n["file-as"]="".concat(e[1],", ").concat(e[0]),n.fullname=!0),n})}},{key:"contributors",value:function(){if(!this.data.contributor)return!1;var t=N.castArray(this.data.contributor).filter(function(t){return"secondary"===t.type});return t.map(function(t){var e=t.full_name||"".concat(t.first_name," ").concat(t.last_name),n={name:e,role:"".concat(t.role||"ctb")};return t.last_name&&t.first_name?n["file-as"]="".concat(t.last_name,", ").concat(t.first_name):(e=e.split(" "),n["file-as"]="".concat(e[1],", ").concat(e[0]),n.fullname=!0),n})}},{key:"publishers",value:function(){if(!this.data.publishers)return!1;var t=N.castArray(this.data.publishers);return t.map(function(t){return t.location?"".concat(t.name,", ").concat(t.location):"".concat(t.name)})}},{key:"loadChapterURLs",value:(n=c(_.mark(function t(){var e,n,r;return _.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.data.chapters,n=e.map(function(t){return C.get(t,{adapter:require("axios/lib/adapters/http")})}),t.next=4,Promise.all(n);case 4:return r=t.sent,t.abrupt("return",r);case 6:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)})},{key:"cover",value:function(){if(this.data.promo_image){var t=this.getURLforImage(this.data.promo_image);return"".concat(t)}return""}},{key:"generate",value:(e=c(_.mark(function t(){var e,n,r,i=this;return _.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={title:this.title(),cover:this.cover(),url:this.data.publisher[0].url,isbn:this.data.identifier.isbn,language:this.data.language,date:this.data.pub_date,creators:this.creators(),contributors:this.contributors(),publisher:this.data.publisher[0].name,description:U(this.data.description.full).replace(/\r?\n|\r/g," "),rights:this.data.copyright,css:this.getStylesheetUrl()},t.next=3,this.loadChapterURLs();case 3:return n=t.sent,r=n.map(function(t){return new F(t.data,e.title,{outputDir:i.outputDir,imageDir:i.imageDir})}),e.pages=r,t.abrupt("return",new Promise(function(t){return t(e),e}));case 7:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"getURLforImage",value:function(t){var e=this.config.imageDir||"img",n=M(this.config.baseURL),r=D.join(n,e,t);return new q(r,LOCALHOST).href.toLowerCase()}},{key:"getStylesheetUrl",value:function(){var t=M(this.config.baseURL),e=D.join(t,"css","epub.css");return[new q(e,LOCALHOST).href.toLowerCase()]}}]),r}(),G=require("events"),W=require("lodash"),V=require("execa"),z=require("yaml-front-matter"),H=require("fs-extra"),Y=require("glob"),K=require("hugo-bin"),Z=require("path"),J=require("child_process").spawn,X=require("child_process").spawnSync,Q=require("child_process").execFileSync,tt=require("child_process").execSync,et=require("util").promisify(H.writeFile),nt=require("url").URL,rt=require("chalk"),it=require("kindlegen"),ot=require("ora"),at=require("js-yaml"),ct=require("perf_hooks").performance,ut=function(t){function n(t){var e;return s(this,n),(e=l(this,h(n).call(this))).config=e.loadConfig(),e.config.publishDir||(e.config.publishDir="site"),e.theme=e.config.theme,e.chapters=e.loadChapters(),e.verbose=t,e}var r,i,o,e;return p(n,G),f(n,[{key:"getBaseUrl",value:function(t){var e=this;return t.map(function(t){return e.loadConfig(t)}).filter(function(t){return""!==t.baseURL})}},{key:"loadConfig",value:function(t){try{return A(t||"config.yml")}catch(t){this.emit("error",t)}}},{key:"loadBookData",value:function(){try{return A(Z.join("data","publication.yml"))}catch(t){this.emit("error",t)}}},{key:"loadChapters",value:function(){var t=Y.sync(Z.join(this.config.contentDir||"content","**","*.md"));return W.sortBy(t,function(t){return z.loadFront(t).weight})}},{key:"isWin",value:function(){return"win32"===process.platform}},{key:"preview",value:function(t){t="webpack/"+(t=void 0!==t?t:"webpack.config.dev.js");var e=this.verbose?"inherit":["pipe","pipe",process.stderr],n=Z.join("themes",this.theme),r=this.isWin()?"webpack.cmd":"webpack",i=Z.join("node_modules",".bin",r);this.emit("info","Launching preview server");var o=ot({text:"Launching preview server"}).start();this.webpack=J(i,["--watch","-d","--progress","--color","--config",t],{cwd:n,stdio:e}),this.hugo=this.spawnHugo("server","--config=config.yml,config/environments/dev.yml","--watch"),o.info("Navigate to http://localhost:1313 to see your changes."),o.info('Press Control+C or type "quire stop" to stop the preview.')}},{key:"install",value:function(){var i=this;return new Promise(function(t){var e=i.config.theme,n=i.isWin()?"npm.cmd":"npm",r=ot({text:"Installing theme dependencies..."}).start();X(n,["install"],{cwd:Z.join("themes",e),stdio:"inherit"}),r.succeed("Theme dependencies successfully installed."),r.succeed("Run quire preview to view changes locally."),t(!0)})}},{key:"buildTheme",value:function(t,e){e=e.replace(/\/?$/,"/");var n=["--config",t="webpack/"+(t=void 0!==t?t:"webpack.config.dev.js")];-1!==t.indexOf("prod")&&(n.push("--output-public-path"),n.push(e));var r=this.verbose?"inherit":["pipe","pipe",process.stderr],i=this.isWin()?"webpack.cmd":"webpack",o=Z.join("node_modules",".bin",i);return V(o,n,{cwd:Z.join("themes",this.theme),stdio:r})}},{key:"buildWeb",value:(e=c(_.mark(function t(n){var r,i,o,a,c,u=this;return _.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.config.publishDir||"site",i=["config.yml","config/site.yml"],n&&i.push("config/environments/".concat(n,".yml")),i.forEach(function(t){var e=u.loadConfig(t);u.config=W.merge(u.config,e)}),o=""!==this.getBaseUrl(i)?this.getBaseUrl(i):"/",a=void 0!==o[0]?o[0].baseURL:"/",c=ot({text:"Building theme assets..."}).start(),e.prev=7,e.next=10,this.buildTheme("webpack.config.prod.js",a);case 10:return c.stopAndPersist({symbol:"✔ ",text:"Assets built"}),Q(K,["--config="+i.join(",")],{stdio:"inherit"}),c.succeed("Site built successfully"),c.succeed("Files output to: ".concat(r)),e.abrupt("return",new Promise(function(t){t(!0)}));case 17:return e.prev=17,e.t0=e.catch(7),e.abrupt("return",new Promise(function(t){t(e.t0),u.errorExit("".concat(e.t0),c)}));case 20:case"end":return e.stop()}},t,this,[[7,17]])})),function(t){return e.apply(this,arguments)})},{key:"getURLforChapter",value:function(t){var e=this.config.contentDir||"content",n=Z.parse(Z.relative(e,t)),r=M(this.config.baseURL),i="http://localhost:1313";if(z.loadFront(t).url){var o=z.loadFront(t).url;return new nt(Z.join(r,o),i).href.toLowerCase()}if(z.loadFront(t).slug){var a=z.loadFront(t).slug;return new nt(Z.join(r,n.dir,a),i).href.toLowerCase()}return"_index"===n.name||"index"===n.name?new nt(Z.join(r,n.dir),i).href.toLowerCase():new nt(Z.join(r,n.dir,n.name),i).href.toLowerCase()}},{key:"buildPDF",value:(o=c(_.mark(function t(n,r){var i,o,a,c,u,s,f,l,h,p,d,v,g=this;return _.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.checkForFileRemove(Z.join("themes",this.theme,"static","css","application.css"));case 2:return i=this.isWin()?"C:\\Program Files (x86)\\Prince\\engine\\bin\\prince.exe":"prince",o=ot("Building PDF").start(),a=ct.now(),this.isWin()||this.checkForCommand(i,o),u=["config.yml","config/pdf.yml"],r&&u.push("config/environments/".concat(r,".yml")),u.forEach(function(t){var e=g.loadConfig(t);g.config=W.merge(g.config,e)}),n=void 0!==n?n:"static/downloads/output",-1!==(s=Z.basename(n)).indexOf(".")&&(s=(n=s.split("."))[0]),f=n.substring(0,n.lastIndexOf("/")),e.prev=13,e.next=16,H.ensureDir(f);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(13),this.errorExit("".concat(e.t0),o);case 21:return s=void 0!==s&&""!==s?s:"output",l="".concat(f=void 0!==f&&""!==f?f:"static/downloads","/").concat(s),h=""!==this.getBaseUrl(u)?this.getBaseUrl(u):"/",p=void 0!==h[0]?h[0].baseURL:"/",d="http://",p.substr(0,d.length)!==d&&(p=d+p),e.prev=28,e.next=31,this.buildTheme("webpack.config.prod.js",p);case 31:return e.next=33,this.spawnHugo("server","--config="+u.join(","));case 33:return this.hugo=e.sent,e.next=36,this.hugo.ready;case 36:return e.sent&&(v=this.loadChapters(),c=W.filter(v,function(t){return!1!==z.loadFront(t).pdf}).map(function(t){return g.getURLforChapter(t)}),H.existsSync(Z.join("themes",this.theme,"static","css","application.css")),tt("".concat(i," ").concat(c.toString().replace(/,/g," ")," -o ").concat(l,".pdf --no-warn-css-unsupported --no-warn-css-unknown --no-warn-css")),this.hugo.kill(),o.succeed("PDF output to: ".concat(l,".pdf")),o.info("Execution Time: ".concat(((ct.now()-a)/1e3).toFixed(3)," seconds"))),e.abrupt("return",new Promise(function(t){t(!0)}));case 41:return e.prev=41,e.t1=e.catch(28),e.abrupt("return",new Promise(function(t){t(!1),g.hugo.kill(),g.errorExit("".concat(e.t1),o)}));case 44:case"end":return e.stop()}},t,this,[[13,18],[28,41]])})),function(t,e){return o.apply(this,arguments)})},{key:"buildEpub",value:(i=c(_.mark(function t(n,r){var i,o,a,c,u,s,f,l,h,p,d,v,g,y,m,b,w,x,S=this;return _.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.config.publishDir||"site",o=ot("Building EPUB").start(),a=ct.now(),this.checkForCommand("pandoc",o),e.next=6,this.checkForFileRemove(Z.join("themes",this.theme,"static","css","epub.css"));case 6:u=["config.yml","config/epub.yml"],r&&u.push("config/environments/".concat(r,".yml")),u.forEach(function(t){var e=S.loadConfig(t);S.config=W.merge(S.config,e)}),e.prev=9,c=at.safeLoad(H.readFileSync("data/publication.yml","utf8")),e.next=17;break;case 13:if(e.prev=13,e.t0=e.catch(9),e.t0)return e.abrupt("return",this.errorExit("".concat(e.t0),o));e.next=17;break;case 17:return void 0!==c.title&&""!==c.title&&null!==c.title||this.errorExit("A title for your publication must be specified in the publication.yml file.",o),void 0!==c.language&&""!==c.language&&null!==c.language||this.errorExit("A language for your publication must be specified in the publication.yml file.",o),s=""!==this.getBaseUrl(u)?this.getBaseUrl(u):"/",f=void 0!==s[0]?s[0].baseURL:"/",e.prev=21,e.next=24,this.spawnHugo("server","--renderToDisk","--config="+u.join(","));case 24:return this.hugo=e.sent,e.next=27,this.buildTheme("webpack.config.epub.js",f);case 27:return e.next=29,this.hugo.ready;case 29:if(e.sent)return e.next=33,H.copy(Z.join("themes",this.theme,"static","css","epub.css"),Z.join(this.config.publishDir,"css","epub.css"));e.next=68;break;case 33:return l=this.loadBookData(),h=this.config,l.chapters=this.chapters.filter(function(t){return!1!==z.loadFront(t).epub}).map(function(t){return S.getURLforChapter(t)}),e.next=38,new B(l,h);case 38:return p=e.sent,e.next=41,p.generate();case 41:return d=e.sent,e.next=44,new k(d,o);case 44:if(v=e.sent,"html/",g=void 0!==n?n:"static/downloads/output",H.existsSync("html/"))return-1!==(y=Z.basename(g)).indexOf(".")&&(y=(n=y.split("."))[0]),m=void 0!==(m=g.substring(0,g.lastIndexOf("/")))&&""!==m?m:"static/downloads",y=void 0!==y&&""!==y?y:"output",e.next=56,H.ensureDir(m);e.next=68;break;case 56:return b=""!==(b=void 0!==v.data.cover?v.data.cover.replace("http://localhost:1313/img/",""):"")?"--epub-cover-image=static/img/".concat(b):"",w="".concat(m,"/").concat(y),x="-f html-native_divs+native_spans -t epub html/epub.xhtml -o ".concat(w,".epub --epub-metadata=html/dc.xml ").concat(b," --template=html/template.xhtml --css=").concat(i,"/css/epub.css -s"),tt("pandoc ".concat(x)),o.succeed("Filepath: ".concat(w,".epub")),o.info("Execution Time: ".concat(((ct.now()-a)/1e3).toFixed(3)," seconds")),e.next=65,this.checkForFileRemove("site/source.js");case 65:return e.next=67,this.checkForFileRemove(Z.join("themes",this.theme,"static","source.js"));case 67:return e.abrupt("return",new Promise(function(t){t(!0),S.hugo.kill(),v.removeHTML()}));case 68:e.next=73;break;case 70:return e.prev=70,e.t1=e.catch(21),e.abrupt("return",new Promise(function(t){t(!1),S.hugo.kill(),S.errorExit("".concat(e.t1),o)}));case 73:case"end":return e.stop()}},t,this,[[9,13],[21,70]])})),function(t,e){return i.apply(this,arguments)})},{key:"buildMobi",value:(r=c(_.mark(function t(n,r){var i,o,a,c,u,s,f,l,h,p,d,v,g,y,m,b,w,x,S=this;return _.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.config.publishDir||"site",o=ot("Building MOBI").start(),a=ct.now(),this.checkForCommand("pandoc",o),e.next=6,this.checkForFileRemove(Z.join("themes",this.theme,"static","css","epub.css"));case 6:u=["config.yml","config/epub.yml"],r&&u.push("config/environments/".concat(r,".yml")),u.forEach(function(t){var e=S.loadConfig(t);S.config=W.merge(S.config,e)}),e.prev=9,c=at.safeLoad(H.readFileSync("data/publication.yml","utf8")),e.next=17;break;case 13:if(e.prev=13,e.t0=e.catch(9),e.t0)return e.abrupt("return",this.errorExit("".concat(e.t0),o));e.next=17;break;case 17:return void 0!==c.title&&""!==c.title&&null!==c.title||this.errorExit("A title for your publication must be specified in the publication.yml file.",o),void 0!==c.language&&""!==c.language&&null!==c.language||this.errorExit("A language for your publication must be specified in the publication.yml file.",o),s=""!==this.getBaseUrl(u)?this.getBaseUrl(u):"/",f=void 0!==s[0]?s[0].baseURL:"/",e.prev=21,e.next=24,this.spawnHugo("server","--renderToDisk","--config="+u.join(","));case 24:return this.hugo=e.sent,e.next=27,this.buildTheme("webpack.config.epub.js",f);case 27:return e.next=29,this.hugo.ready;case 29:if(e.sent)return e.next=33,H.copy(Z.join("themes",this.theme,"static","css","epub.css"),Z.join(this.config.publishDir,"css","epub.css"));e.next=70;break;case 33:return l=this.loadBookData(),h=this.config,l.chapters=this.chapters.filter(function(t){return!1!==z.loadFront(t).epub}).map(function(t){return S.getURLforChapter(t)}),e.next=38,new B(l,h);case 38:return p=e.sent,e.next=41,p.generate();case 41:return d=e.sent,e.next=44,new k(d,o);case 44:if(v=e.sent,"html/",g=void 0!==n?n:"static/downloads/output",H.existsSync("html/"))return-1!==(y=Z.basename(g)).indexOf(".")&&(y=(n=y.split("."))[0]),m=void 0!==(m=g.substring(0,g.lastIndexOf("/")))&&""!==m?m:"static/downloads",y=void 0!==y&&""!==y?y:"output",e.next=56,H.ensureDir(m);e.next=70;break;case 56:return b=""!==(b=void 0!==v.data.cover?v.data.cover.replace("http://localhost:1313/img/",""):"")?"--epub-cover-image=static/img/".concat(b):"",w="".concat(m,"/").concat(y),x="-f html-native_divs+native_spans -t epub html/epub.xhtml -o ".concat(w,"-mobi.epub --epub-metadata=html/dc.xml ").concat(b," --template=html/template.xhtml --css=").concat(i,"/css/epub.css -s"),tt("pandoc ".concat(x)),it(H.readFileSync("".concat(w,"-mobi.epub")),function(t,e){if(t)throw S.errorExit("".concat(t),o);return et("".concat(w,".mobi"),e),o.succeed("Filepath: ".concat(w,".mobi")),o.info("Execution Time: ".concat(((ct.now()-a)/1e3).toFixed(3)," seconds")),new Promise(function(t){t(!0)})}),e.next=64,this.checkForFileRemove("".concat(w,"-mobi.epub"));case 64:return e.next=66,this.checkForFileRemove("site/source.js");case 66:return e.next=68,this.checkForFileRemove(Z.join("themes",this.theme,"static","source.js"));case 68:this.hugo.kill(),v.removeHTML();case 70:e.next=75;break;case 72:return e.prev=72,e.t1=e.catch(21),e.abrupt("return",new Promise(function(t){t(!1),S.hugo.kill(),S.errorExit("".concat(e.t1),o)}));case 75:case"end":return e.stop()}},t,this,[[9,13],[21,72]])})),function(t,e){return r.apply(this,arguments)})},{key:"checkFolderCreated",value:function(i,o){var a=this,c=[];H.readdir(i,function(t,e){if(t)return o(t);var r=e.length;if(!r)return o(null,c);e.forEach(function(n){n=Z.resolve(i,n),H.stat(n,function(t,e){e&&e.isDirectory()?a.checkFolderCreated(n,function(t,e){c=c.concat(e),--r||o(null,c)}):(c.push(n),--r||o(null,c))})})})}},{key:"checkForFileRemove",value:function(e){if(H.existsSync(e))return new Promise(function(t){t(H.unlinkSync(e))})}},{key:"checkForCommand",value:function(t,e){T(t)&&this.errorExit("Please install ".concat(t," before continuing."),e)}},{key:"errorExit",value:function(t,e){e.fail(t),process.exit(1)}},{key:"spawnHugo",value:function(){var n,r,i=this,o="",a=J(K,Array.prototype.slice.call(arguments));return a.ready=new Promise(function(t,e){r=t,n=e}),a.stdout.on("data",function(t){var e=t.toString(),n=rt.cyan(e);i.verbose&&console.log(n),-1<e.indexOf("Press Ctrl+C to stop")&&r(e,a)}),a.stderr.on("data",function(t){o+=t.toString()}),a.on("exit",function(t,e){o&&(i.emit("error",o),n(o,a))}),a}}]),n}(),st=require("events"),ft=require("chalk"),lt=require("execa"),ht=require("path"),pt=require("rimraf"),dt=require("child_process").spawnSync,vt=require("readline"),gt="git@github.com:gettypubs/quire-starter.git",yt="master",mt="quire-starter-theme",bt=function(t){function e(){var t;return s(this,e),(t=l(this,h(e).call(this))).on("new",t.create),t.on("preview",t.preview),t.on("install",t.install),t.on("site",t.site),t.on("epub",t.epub),t.on("template",t.template),t.on("mobi",t.mobi),t.on("pdf",t.pdf),t.on("error",t.warn),t.on("debug",t.debug),t.once("shutdown",t.shutdown),t.isVerbose=!1,t}var n,r,i,o,a;return p(e,st),f(e,[{key:"create",value:function(i){function o(){return(o=c(_.mark(function t(e,n,r,i,o){return _.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,lt("git",e);case 3:return a.notice("Configuring project..."),process.chdir(r),dt("git",["checkout","-b","master"]),dt("git",["remote","rm","origin"]),dt("git",["rm",".gitmodules"]),dt("git",["rm","--cached",ht.join("themes",mt)]),a.notice("Setting up theme..."),process.chdir(n),pt.sync(".git"),process.chdir(r),dt("git",["add","-A"]),dt("git",["commit","-m","Add quire-starter-theme to project"]),a.notice("Installing dependencies..."),a.npmInstall(n),a.confirm("Theme and dependencies successfully installed."),a.notice("Run quire preview in your project folder to view changes locally."),o(!0),t.abrupt("return",!0);case 23:return t.prev=23,t.t0=t.catch(0),a.error(t.t0.message),i(a.error(t.t0.message)),t.abrupt("return",!1);case 28:case"end":return t.stop()}},t,null,[[0,23]])}))).apply(this,arguments)}var a=this;return new Promise(function(t,e){if(T("git"))e(a.emit("warning","Please install Git before continuing.")),a.emit("warning","Please install Git before continuing.");else{a.notice("Installing starter kit...");var n=ht.resolve(i),r=ht.resolve(i,"themes",mt);!function(t,e,n,r,i){o.apply(this,arguments)}(["clone","--recursive","--branch",yt,gt,i],r,n,e,t)}})}},{key:"preview",value:function(){var e=this;return new Promise(function(t){e.project=new ut(e.verbose),e.project.on("info",e.notice),e.project.on("error",function(t){e.error(t),e.shutdown()}),e.project.preview(),e.listen(),t(!0)})}},{key:"site",value:(a=c(_.mark(function t(e){var n;return _.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new ut(this.verbose)).on("info",this.notice),n.on("error",this.error),t.prev=3,t.next=6,n.buildWeb(e);case 6:return t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t.catch(3),t.abrupt("return",!1);case 12:case"end":return t.stop()}},t,this,[[3,9]])})),function(t){return a.apply(this,arguments)})},{key:"epub",value:(o=c(_.mark(function t(e,n){var r;return _.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new ut(this.verbose)).on("info",this.notice),r.on("error",this.error),t.prev=3,t.next=6,r.buildEpub(e,n);case 6:return t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t.catch(3),t.abrupt("return",!1);case 12:case"end":return t.stop()}},t,this,[[3,9]])})),function(t,e){return o.apply(this,arguments)})},{key:"template",value:function(t){var e=new ut(this.verbose);e.on("info",this.notice),e.on("error",this.error),e.downloadTemplate(t)}},{key:"mobi",value:(i=c(_.mark(function t(e,n){var r;return _.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new ut(this.verbose)).on("info",this.notice),r.on("error",this.error),t.prev=3,t.next=6,r.buildMobi(e,n);case 6:return t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t.catch(3),t.abrupt("return",!1);case 12:case"end":return t.stop()}},t,this,[[3,9]])})),function(t,e){return i.apply(this,arguments)})},{key:"install",value:(r=c(_.mark(function t(){var e;return _.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=new ut(this.verbose)).on("info",this.notice),e.on("error",this.error),t.prev=3,t.next=6,e.install();case 6:return t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t.catch(3),t.abrupt("return",!1);case 12:case"end":return t.stop()}},t,this,[[3,9]])})),function(){return r.apply(this,arguments)})},{key:"pdf",value:(n=c(_.mark(function t(e,n){var r;return _.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new ut(this.verbose)).on("info",this.notice),r.on("error",this.error),t.prev=3,t.next=6,r.buildPDF(e,n);case 6:return t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t.catch(3),t.abrupt("return",!1);case 12:case"end":return t.stop()}},t,this,[[3,9]])})),function(t,e){return n.apply(this,arguments)})},{key:"debug",value:function(){var t=new ut(this.verbose);t.on("info",this.notice),t.on("error",this.error),console.log(t)}},{key:"confirm",value:function(t){console.log(ft.green(t))}},{key:"error",value:function(t){console.log(ft.red(t)),process.exitCode=1}},{key:"notice",value:function(t){console.log(t)}},{key:"npmInstall",value:function(t){t=t||process.cwd(),dt("npm",["install"],{cwd:t},function(t){t&&this.emit("error",t)})}},{key:"shutdown",value:function(t){this.notice("Shutting down Quire"),this.project&&this.project.hasOwnProperty("hugo")&&this.project.hugo&&this.project.hugo.kill(),this.project&&this.project.hasOwnProperty("webpack")&&this.project.webpack&&this.project.webpack.kill(),t||process.exit(),process.exit()}},{key:"warn",value:function(t){console.log(ft.yellow(t)),process.exitCode=1}},{key:"listen",value:function(){var n=this,r=vt.createInterface({input:process.stdin});r.on("line",function(t){var e=t.replace("quire ","");switch(e){case"stop":n.shutdown(),r.close();break;default:console.log(ft.yellow("No method for: ".concat(e)))}})}},{key:"verbose",set:function(t){this.isVerbose=t},get:function(){return this.isVerbose}}]),e}(),Ht=e(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),wt={}.hasOwnProperty,Yt=function(t,e){return wt.call(t,e)},Kt=!Wt(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),xt=e(function(t){var e=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=e)}),Zt=(xt.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),St=function(t){if(!Zt(t))throw TypeError(t+" is not an object!");return t},_t=Ht.document,kt=Zt(_t)&&Zt(_t.createElement),Et=!Kt&&!Wt(function(){return 7!=Object.defineProperty(I("div"),"a",{get:function(){return 7}}).a}),Ft=Object.defineProperty,Jt={f:Kt?Object.defineProperty:function(t,e,n){if(St(t),e=Vt(e,!0),St(n),Et)try{return Ft(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},Xt=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},Qt=Kt?function(t,e,n){return Jt.f(t,e,Xt(1,n))}:function(t,e,n){return t[e]=n,t},Ot=0,Pt=Math.random(),jt=e(function(t){var e="__core-js_shared__",n=Ht[e]||(Ht[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:xt.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),Lt=jt("native-function-to-string",Function.toString),At=e(function(t){var o=zt("src"),e="toString",a=(""+Lt).split(e);xt.inspectSource=function(t){return Lt.call(t)},(t.exports=function(t,e,n,r){var i="function"==typeof n;i&&(Yt(n,"name")||Qt(n,"name",e)),t[e]!==n&&(i&&(Yt(n,o)||Qt(n,o,t[e]?""+t[e]:a.join(String(e)))),t===Ht?t[e]=n:r?t[e]?t[e]=n:Qt(t,e,n):(delete t[e],Qt(t,e,n)))})(Function.prototype,e,function(){return"function"==typeof this&&this[o]||Lt.call(this)})}),te=function(r,i,t){if($(r),void 0===i)return r;switch(t){case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}},Tt="prototype",Mt=function(t,e,n){var r,i,o,a,c=t&Mt.F,u=t&Mt.G,s=t&Mt.S,f=t&Mt.P,l=t&Mt.B,h=u?Ht:s?Ht[e]||(Ht[e]={}):(Ht[e]||{})[Tt],p=u?xt:xt[e]||(xt[e]={}),d=p[Tt]||(p[Tt]={});for(r in u&&(n=e),n)o=((i=!c&&h&&void 0!==h[r])?h:n)[r],a=l&&i?te(o,Ht):f&&"function"==typeof o?te(Function.call,o):o,h&&At(h,r,o,t&Mt.U),p[r]!=o&&Qt(p,r,a),f&&d[r]!=o&&(d[r]=o)};Ht.core=xt,Mt.F=1,Mt.G=2,Mt.S=4,Mt.P=8,Mt.B=16,Mt.W=32,Mt.U=64,Mt.R=128;function It(t,e,n){t&&!Yt(t=n?t:t.prototype,pe)&&he(t,pe,{configurable:!0,value:e})}function $t(t){var e=xt.Symbol||(xt.Symbol=Ht.Symbol||{});"_"==t.charAt(0)||t in e||ve(e,t,{value:de.f(t)})}function Rt(t){return ge.call(t).slice(8,-1)}function Nt(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}function Ct(t){return ye(Nt(t))}function ee(t){return isNaN(t=+t)?0:(0<t?be:me)(t)}function ne(t,e){return(t=ee(t))<0?Se(t+e,0):_e(t,e)}function re(c){return function(t,e,n){var r,i=Ct(t),o=xe(i.length),a=ne(n,o);if(c&&e!=e){for(;a<o;)if((r=i[a++])!=r)return!0}else for(;a<o;a++)if((c||a in i)&&i[a]===e)return c||a||0;return!c&&-1}}function Dt(t){return ke[t]||(ke[t]=zt(t))}function qt(t,e){var n,r=Ct(t),i=0,o=[];for(n in r)n==Fe||Yt(r,n)&&o.push(n);for(;e.length>i;)Yt(r,n=e[i++])&&(~Ee(o,n)||o.push(n));return o}function ie(t){return Object(Nt(t))}function Ut(){}function Bt(t){var e=an[t]=Ce(Je[tn]);return e._k=t,e}function Gt(t,e){St(t);for(var n,r=function(t){var e=Pe(t),n=je.f;if(n)for(var r,i=n(t),o=Le.f,a=0;i.length>a;)o.call(t,r=i[a++])&&e.push(r);return e}(e=Ct(e)),i=0,o=r.length;i<o;)dn(t,n=r[i++],e[n]);return t}function oe(t){var e=rn.call(this,t=Vt(t,!0));return!(this===un&&Yt(an,t)&&!Yt(cn,t))&&(!(e||!Yt(this,t)||!Yt(an,t)||Yt(this,en)&&this[en][t])||e)}function ae(t,e){if(t=Ct(t),e=Vt(e,!0),t!==un||!Yt(an,e)||Yt(cn,e)){var n=Ye(t,e);return!n||!Yt(an,e)||Yt(t,en)&&t[en][e]||(n.enumerable=!0),n}}function ce(t){for(var e,n=Ze(Ct(t)),r=[],i=0;n.length>i;)Yt(an,e=n[i++])||e==en||e==He||r.push(e);return r}function ue(t){for(var e,n=t===un,r=Ze(n?cn:Ct(t)),i=[],o=0;r.length>o;)!Yt(an,e=r[o++])||n&&!Yt(un,e)||i.push(an[e]);return i}var se=Mt,fe=e(function(t){function n(t){e(t,r,{value:{i:"O"+ ++i,w:{}}})}var r=zt("meta"),e=Jt.f,i=0,o=Object.isExtensible||function(){return!0},a=!Wt(function(){return o(Object.preventExtensions({}))}),c=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!Zt(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!Yt(t,r)){if(!o(t))return"F";if(!e)return"E";n(t)}return t[r].i},getWeak:function(t,e){if(!Yt(t,r)){if(!o(t))return!0;if(!e)return!1;n(t)}return t[r].w},onFreeze:function(t){return a&&c.NEED&&o(t)&&!Yt(t,r)&&n(t),t}}}),le=(fe.KEY,fe.NEED,fe.fastKey,fe.getWeak,fe.onFreeze,e(function(t){var e=jt("wks"),n=Ht.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:zt)("Symbol."+t))}).store=e})),he=Jt.f,pe=le("toStringTag"),de={f:le},ve=Jt.f,ge={}.toString,ye=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==Rt(t)?t.split(""):Object(t)},me=Math.ceil,be=Math.floor,we=Math.min,xe=function(t){return 0<t?we(ee(t),9007199254740991):0},Se=Math.max,_e=Math.min,ke=jt("keys"),Ee=re(!1),Fe=Dt("IE_PROTO"),Oe="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Pe=Object.keys||function(t){return qt(t,Oe)},je={f:Object.getOwnPropertySymbols},Le={f:{}.propertyIsEnumerable},Ae=Array.isArray||function(t){return"Array"==Rt(t)},Te=Kt?Object.defineProperties:function(t,e){St(t);for(var n,r=Pe(e),i=r.length,o=0;o<i;)Jt.f(t,n=r[o++],e[n]);return t},Me=Ht.document,Ie=Me&&Me.documentElement,$e=Dt("IE_PROTO"),Re="prototype",Ne=function(){var t,e=I("iframe"),n=Oe.length;for(e.style.display="none",Ie.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Ne=t.F;n--;)delete Ne[Re][Oe[n]];return Ne()},Ce=Object.create||function(t,e){var n;return null!==t?(Ut[Re]=St(t),n=new Ut,Ut[Re]=null,n[$e]=t):n=Ne(),void 0===e?n:Te(n,e)},De=Oe.concat("length","prototype"),qe={f:Object.getOwnPropertyNames||function(t){return qt(t,De)}},Ue=qe.f,Be={}.toString,Ge="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],We={f:function(t){return Ge&&"[object Window]"==Be.call(t)?function(t){try{return Ue(t)}catch(t){return Ge.slice()}}(t):Ue(Ct(t))}},Ve=Object.getOwnPropertyDescriptor,ze={f:Kt?Ve:function(t,e){if(t=Ct(t),e=Vt(e,!0),Et)try{return Ve(t,e)}catch(t){}if(Yt(t,e))return Xt(!Le.f.call(t,e),t[e])}},He=fe.KEY,Ye=ze.f,Ke=Jt.f,Ze=We.f,Je=Ht.Symbol,Xe=Ht.JSON,Qe=Xe&&Xe.stringify,tn="prototype",en=le("_hidden"),nn=le("toPrimitive"),rn={}.propertyIsEnumerable,on=jt("symbol-registry"),an=jt("symbols"),cn=jt("op-symbols"),un=Object[tn],sn="function"==typeof Je&&!!je.f,fn=Ht.QObject,ln=!fn||!fn[tn]||!fn[tn].findChild,hn=Kt&&Wt(function(){return 7!=Ce(Ke({},"a",{get:function(){return Ke(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Ye(un,e);r&&delete un[e],Ke(t,e,n),r&&t!==un&&Ke(un,e,r)}:Ke,pn=sn&&"symbol"==typeof Je.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Je},dn=function(t,e,n){return t===un&&dn(cn,e,n),St(t),e=Vt(e,!0),St(n),Yt(an,e)?(n.enumerable?(Yt(t,en)&&t[en][e]&&(t[en][e]=!1),n=Ce(n,{enumerable:Xt(0,!1)})):(Yt(t,en)||Ke(t,en,Xt(1,{})),t[en][e]=!0),hn(t,e,n)):Ke(t,e,n)};sn||(At((Je=function(){if(this instanceof Je)throw TypeError("Symbol is not a constructor!");var e=zt(0<arguments.length?arguments[0]:void 0),n=function(t){this===un&&n.call(cn,t),Yt(this,en)&&Yt(this[en],e)&&(this[en][e]=!1),hn(this,e,Xt(1,t))};return Kt&&ln&&hn(un,e,{configurable:!0,set:n}),Bt(e)})[tn],"toString",function(){return this._k}),ze.f=ae,Jt.f=dn,qe.f=We.f=ce,Le.f=oe,je.f=ue,Kt&&At(un,"propertyIsEnumerable",oe,!0),de.f=function(t){return Bt(le(t))}),se(se.G+se.W+se.F*!sn,{Symbol:Je});for(var vn="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),gn=0;vn.length>gn;)le(vn[gn++]);for(var yn=Pe(le.store),mn=0;yn.length>mn;)$t(yn[mn++]);se(se.S+se.F*!sn,"Symbol",{for:function(t){return Yt(on,t+="")?on[t]:on[t]=Je(t)},keyFor:function(t){if(!pn(t))throw TypeError(t+" is not a symbol!");for(var e in on)if(on[e]===t)return e},useSetter:function(){ln=!0},useSimple:function(){ln=!1}}),se(se.S+se.F*!sn,"Object",{create:function(t,e){return void 0===e?Ce(t):Gt(Ce(t),e)},defineProperty:dn,defineProperties:Gt,getOwnPropertyDescriptor:ae,getOwnPropertyNames:ce,getOwnPropertySymbols:ue});var bn=Wt(function(){je.f(1)});se(se.S+se.F*bn,"Object",{getOwnPropertySymbols:function(t){return je.f(ie(t))}}),Xe&&se(se.S+se.F*(!sn||Wt(function(){var t=Je();return"[null]"!=Qe([t])||"{}"!=Qe({a:t})||"{}"!=Qe(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(Zt(e)||void 0!==t)&&!pn(t))return Ae(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!pn(e))return e}),r[1]=e,Qe.apply(Xe,r)}}),Je[tn][nn]||Qt(Je[tn],nn,Je[tn].valueOf),It(Je,"Symbol"),It(Math,"Math",!0),It(Ht.JSON,"JSON",!0),se(se.S,"Object",{create:Ce}),se(se.S+se.F*!Kt,"Object",{defineProperty:Jt.f}),se(se.S+se.F*!Kt,"Object",{defineProperties:Te});function wn(t,e){var n=(xt.Object||{})[t]||Object[t],r={};r[t]=e(n),se(se.S+se.F*Wt(function(){n(1)}),"Object",r)}var xn=ze.f;wn("getOwnPropertyDescriptor",function(){return function(t,e){return xn(Ct(t),e)}});var Sn=Dt("IE_PROTO"),_n=Object.prototype,kn=Object.getPrototypeOf||function(t){return t=ie(t),Yt(t,Sn)?t[Sn]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?_n:null};wn("getPrototypeOf",function(){return function(t){return kn(ie(t))}}),wn("keys",function(){return function(t){return Pe(ie(t))}}),wn("getOwnPropertyNames",function(){return We.f});var En=fe.onFreeze;wn("freeze",function(e){return function(t){return e&&Zt(t)?e(En(t)):t}});var Fn=fe.onFreeze;wn("seal",function(e){return function(t){return e&&Zt(t)?e(Fn(t)):t}});var On=fe.onFreeze;wn("preventExtensions",function(e){return function(t){return e&&Zt(t)?e(On(t)):t}}),wn("isFrozen",function(e){return function(t){return!Zt(t)||!!e&&e(t)}}),wn("isSealed",function(e){return function(t){return!Zt(t)||!!e&&e(t)}}),wn("isExtensible",function(e){return function(t){return!!Zt(t)&&(!e||e(t))}});var Pn=Object.assign,jn=!Pn||Wt(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=Pn({},t)[n]||Object.keys(Pn({},e)).join("")!=r})?function(t,e){for(var n=ie(t),r=arguments.length,i=1,o=je.f,a=Le.f;i<r;)for(var c,u=ye(arguments[i++]),s=o?Pe(u).concat(o(u)):Pe(u),f=s.length,l=0;l<f;)c=s[l++],Kt&&!a.call(u,c)||(n[c]=u[c]);return n}:Pn;se(se.S+se.F,"Object",{assign:jn});var Ln=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};se(se.S,"Object",{is:Ln});function An(t,e){if(St(t),!Zt(e)&&null!==e)throw TypeError(e+": can't set as prototype!")}var Tn={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,r){try{(r=te(Function.call,ze.f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,e){return An(t,e),n?t.__proto__=e:r(t,e),t}}({},!1):void 0),check:An};se(se.S,"Object",{setPrototypeOf:Tn.set});function Mn(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),In))?n:$n?Rt(e):"Object"==(r=Rt(e))&&"function"==typeof e.callee?"Arguments":r}var In=le("toStringTag"),$n="Arguments"==Rt(function(){return arguments}()),Rn={};Rn[le("toStringTag")]="z",Rn+""!="[object z]"&&At(Object.prototype,"toString",function(){return"[object "+Mn(this)+"]"},!0);function Nn(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}var Cn=[].slice,Dn={},qn=Function.bind||function(e){var n=$(this),r=Cn.call(arguments,1),i=function(){var t=r.concat(Cn.call(arguments));return this instanceof i?function(t,e,n){if(!(e in Dn)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";Dn[e]=Function("F,a","return new F("+r.join(",")+")")}return Dn[e](t,n)}(n,t.length,t):Nn(n,t,e)};return Zt(n.prototype)&&(i.prototype=n.prototype),i};se(se.P,"Function",{bind:qn});var Un=Jt.f,Bn=Function.prototype,Gn=/^\s*function ([^ (]*)/;"name"in Bn||Kt&&Un(Bn,"name",{configurable:!0,get:function(){try{return(""+this).match(Gn)[1]}catch(t){return""}}});var Wn=le("hasInstance"),Vn=Function.prototype;Wn in Vn||Jt.f(Vn,Wn,{value:function(t){if("function"!=typeof this||!Zt(t))return!1;if(!Zt(this.prototype))return t instanceof this;for(;t=kn(t);)if(this.prototype===t)return!0;return!1}});function zn(t,e,n){var r={},i=Wt(function(){return!!Hn[t]()||"​"!="​"[t]()}),o=r[t]=i?e(Jn):Hn[t];n&&(r[n]=o),se(se.P+se.F*i,"String",r)}var Hn="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",Yn="["+Hn+"]",Kn=RegExp("^"+Yn+Yn+"*"),Zn=RegExp(Yn+Yn+"*$"),Jn=zn.trim=function(t,e){return t=String(Nt(t)),1&e&&(t=t.replace(Kn,"")),2&e&&(t=t.replace(Zn,"")),t},Xn=zn,Qn=Ht.parseInt,tr=Xn.trim,er=/^[-+]?0[xX]/,nr=8!==Qn(Hn+"08")||22!==Qn(Hn+"0x16")?function(t,e){var n=tr(String(t),3);return Qn(n,e>>>0||(er.test(n)?16:10))}:Qn;se(se.G+se.F*(parseInt!=nr),{parseInt:nr});var rr=Ht.parseFloat,ir=Xn.trim,or=1/rr(Hn+"-0")!=-1/0?function(t){var e=ir(String(t),3),n=rr(e);return 0===n&&"-"==e.charAt(0)?-0:n}:rr;se(se.G+se.F*(parseFloat!=or),{parseFloat:or});function ar(t,e,n){var r,i=e.constructor;return i!==n&&"function"==typeof i&&(r=i.prototype)!==n.prototype&&Zt(r)&&ur&&ur(t,r),t}function cr(t){var e=Vt(t,!1);if("string"==typeof e&&2<e.length){var n,r,i,o=(e=mr?e.trim():hr(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,c=e.slice(2),u=0,s=c.length;u<s;u++)if((a=c.charCodeAt(u))<48||i<a)return NaN;return parseInt(c,r)}}return+e}var ur=Tn.set,sr=qe.f,fr=ze.f,lr=Jt.f,hr=Xn.trim,pr="Number",dr=Ht[pr],vr=dr,gr=dr.prototype,yr=Rt(Ce(gr))==pr,mr="trim"in String.prototype;if(!dr(" 0o1")||!dr("0b1")||dr("+0x1")){dr=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof dr&&(yr?Wt(function(){gr.valueOf.call(n)}):Rt(n)!=pr)?ar(new vr(cr(e)),n,dr):cr(e)};for(var br,wr=Kt?sr(vr):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),xr=0;wr.length>xr;xr++)Yt(vr,br=wr[xr])&&!Yt(dr,br)&&lr(dr,br,fr(vr,br));(dr.prototype=gr).constructor=dr,At(Ht,pr,dr)}function Sr(t,e){if("number"!=typeof t&&"Number"!=Rt(t))throw TypeError(e);return+t}function _r(t){var e=String(Nt(this)),n="",r=ee(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}function kr(t,e){for(var n=-1,r=e;++n<6;)r+=t*jr[n],jr[n]=r%1e7,r=Pr(r/1e7)}function Er(t){for(var e=6,n=0;0<=--e;)n+=jr[e],jr[e]=Pr(n/t),n=n%t*1e7}function Fr(){for(var t=6,e="";0<=--t;)if(""!==e||0===t||0!==jr[t]){var n=String(jr[t]);e=""===e?n:e+_r.call("0",7-n.length)+n}return e}var Or=1..toFixed,Pr=Math.floor,jr=[0,0,0,0,0,0],Lr="Number.toFixed: incorrect invocation!",Ar=function(t,e,n){return 0===e?n:e%2==1?Ar(t,e-1,n*t):Ar(t*t,e/2,n)};se(se.P+se.F*(!!Or&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!Wt(function(){Or.call({})})),"Number",{toFixed:function(t){var e,n,r,i,o=Sr(this,Lr),a=ee(t),c="",u="0";if(a<0||20<a)throw RangeError(Lr);if(o!=o)return"NaN";if(o<=-1e21||1e21<=o)return String(o);if(o<0&&(c="-",o=-o),1e-21<o)if(n=(e=function(t){for(var e=0,n=t;4096<=n;)e+=12,n/=4096;for(;2<=n;)e+=1,n/=2;return e}(o*Ar(2,69,1))-69)<0?o*Ar(2,-e,1):o/Ar(2,e,1),n*=4503599627370496,0<(e=52-e)){for(kr(0,n),r=a;7<=r;)kr(1e7,0),r-=7;for(kr(Ar(10,r,1),0),r=e-1;23<=r;)Er(1<<23),r-=23;Er(1<<r),kr(1,1),Er(2),u=Fr()}else kr(0,n),kr(1<<-e,0),u=Fr()+_r.call("0",a);return u=0<a?c+((i=u.length)<=a?"0."+_r.call("0",a-i)+u:u.slice(0,i-a)+"."+u.slice(i-a)):c+u}});var Tr=1..toPrecision;se(se.P+se.F*(Wt(function(){return"1"!==Tr.call(1,void 0)})||!Wt(function(){Tr.call({})})),"Number",{toPrecision:function(t){var e=Sr(this,"Number#toPrecision: incorrect invocation!");return void 0===t?Tr.call(e):Tr.call(e,t)}}),se(se.S,"Number",{EPSILON:Math.pow(2,-52)});var Mr=Ht.isFinite;se(se.S,"Number",{isFinite:function(t){return"number"==typeof t&&Mr(t)}});function Ir(t){return!Zt(t)&&isFinite(t)&&$r(t)===t}var $r=Math.floor;se(se.S,"Number",{isInteger:Ir}),se(se.S,"Number",{isNaN:function(t){return t!=t}});var Rr=Math.abs;se(se.S,"Number",{isSafeInteger:function(t){return Ir(t)&&Rr(t)<=9007199254740991}}),se(se.S,"Number",{MAX_SAFE_INTEGER:9007199254740991}),se(se.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991}),se(se.S+se.F*(Number.parseFloat!=or),"Number",{parseFloat:or}),se(se.S+se.F*(Number.parseInt!=nr),"Number",{parseInt:nr});var Nr=Math.log1p||function(t){return-1e-8<(t=+t)&&t<1e-8?t-t*t/2:Math.log(1+t)},Cr=Math.sqrt,Dr=Math.acosh;se(se.S+se.F*!(Dr&&710==Math.floor(Dr(Number.MAX_VALUE))&&Dr(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:94906265.62425156<t?Math.log(t)+Math.LN2:Nr(t-1+Cr(t-1)*Cr(t+1))}});var qr=Math.asinh;se(se.S+se.F*!(qr&&0<1/qr(0)),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}});var Ur=Math.atanh;se(se.S+se.F*!(Ur&&1/Ur(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}});var Br=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1};se(se.S,"Math",{cbrt:function(t){return Br(t=+t)*Math.pow(Math.abs(t),1/3)}}),se(se.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}});var Gr=Math.exp;se(se.S,"Math",{cosh:function(t){return(Gr(t=+t)+Gr(-t))/2}});var Wr=Math.expm1,Vr=!Wr||22025.465794806718<Wr(10)||Wr(10)<22025.465794806718||-2e-17!=Wr(-2e-17)?function(t){return 0==(t=+t)?t:-1e-6<t&&t<1e-6?t+t*t/2:Math.exp(t)-1}:Wr;se(se.S+se.F*(Vr!=Math.expm1),"Math",{expm1:Vr});var zr=Math.pow,Hr=zr(2,-52),Yr=zr(2,-23),Kr=zr(2,127)*(2-Yr),Zr=zr(2,-126),Jr=Math.fround||function(t){var e,n,r=Math.abs(t),i=Br(t);return r<Zr?i*function(t){return t+1/Hr-1/Hr}(r/Zr/Yr)*Zr*Yr:Kr<(n=(e=(1+Yr/Hr)*r)-(e-r))||n!=n?i*(1/0):i*n};se(se.S,"Math",{fround:Jr});var Xr=Math.abs;se(se.S,"Math",{hypot:function(t,e){for(var n,r,i=0,o=0,a=arguments.length,c=0;o<a;)c<(n=Xr(arguments[o++]))?(i=i*(r=c/n)*r+1,c=n):i+=0<n?(r=n/c)*r:n;return c===1/0?1/0:c*Math.sqrt(i)}});var Qr=Math.imul;se(se.S+se.F*Wt(function(){return-5!=Qr(4294967295,5)||2!=Qr.length}),"Math",{imul:function(t,e){var n=65535,r=+t,i=+e,o=n&r,a=n&i;return 0|o*a+((n&r>>>16)*a+o*(n&i>>>16)<<16>>>0)}}),se(se.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}}),se(se.S,"Math",{log1p:Nr}),se(se.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}}),se(se.S,"Math",{sign:Br});var ti=Math.exp;se(se.S+se.F*Wt(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(Vr(t)-Vr(-t))/2:(ti(t-1)-ti(-t-1))*(Math.E/2)}});var ei=Math.exp;se(se.S,"Math",{tanh:function(t){var e=Vr(t=+t),n=Vr(-t);return e==1/0?1:n==1/0?-1:(e-n)/(ei(t)+ei(-t))}}),se(se.S,"Math",{trunc:function(t){return(0<t?Math.floor:Math.ceil)(t)}});var ni=String.fromCharCode,ri=String.fromCodePoint;se(se.S+se.F*(!!ri&&1!=ri.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,i=0;i<r;){if(e=+arguments[i++],ne(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?ni(e):ni(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}}),se(se.S,"String",{raw:function(t){for(var e=Ct(t.raw),n=xe(e.length),r=arguments.length,i=[],o=0;o<n;)i.push(String(e[o++])),o<r&&i.push(String(arguments[o]));return i.join("")}}),Xn("trim",function(t){return function(){return t(this,3)}});function ii(c){return function(t,e){var n,r,i=String(Nt(t)),o=ee(e),a=i.length;return o<0||a<=o?c?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===a||(r=i.charCodeAt(o+1))<56320||57343<r?c?i.charAt(o):n:c?i.slice(o,o+2):r-56320+(n-55296<<10)+65536}}var oi={},ai={};Qt(ai,le("iterator"),function(){return this});function ci(t,e,n){t.prototype=Ce(ai,{next:Xt(1,n)}),It(t,e+" Iterator")}function ui(){return this}function si(t,e,n,r,i,o,a){function c(t){if(!li&&t in d)return d[t];switch(t){case"keys":case hi:return function(){return new n(this,t)}}return function(){return new n(this,t)}}ci(n,e,r);var u,s,f,l=e+" Iterator",h=i==hi,p=!1,d=t.prototype,v=d[fi]||d["@@iterator"]||i&&d[i],g=v||c(i),y=i?h?c("entries"):g:void 0,m="Array"==e&&d.entries||v;if(!m||(f=kn(m.call(new t)))!==Object.prototype&&f.next&&(It(f,l,!0),"function"!=typeof f[fi]&&Qt(f,fi,ui)),h&&v&&v.name!==hi&&(p=!0,g=function(){return v.call(this)}),!li&&!p&&d[fi]||Qt(d,fi,g),oi[e]=g,oi[l]=ui,i)if(u={values:h?g:c(hi),keys:o?g:c("keys"),entries:y},a)for(s in u)s in d||At(d,s,u[s]);else se(se.P+se.F*(li||p),e,u);return u}var fi=le("iterator"),li=!([].keys&&"next"in[].keys()),hi="values",pi=ii(!0);si(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=pi(e,n),this._i+=t.length,{value:t,done:!1})});var di=ii(!1);se(se.P,"String",{codePointAt:function(t){return di(this,t)}});function vi(t){var e;return Zt(t)&&(void 0!==(e=t[mi])?!!e:"RegExp"==Rt(t))}function gi(t,e,n){if(vi(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(Nt(t))}function yi(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[bi]=!1,!"/./"[e](n)}catch(t){}}return!0}var mi=le("match"),bi=le("match"),wi="endsWith",xi=""[wi];se(se.P+se.F*yi(wi),"String",{endsWith:function(t){var e=gi(this,t,wi),n=1<arguments.length?arguments[1]:void 0,r=xe(e.length),i=void 0===n?r:Math.min(xe(n),r),o=String(t);return xi?xi.call(e,o,i):e.slice(i-o.length,i)===o}});var Si="includes";se(se.P+se.F*yi(Si),"String",{includes:function(t){return!!~gi(this,t,Si).indexOf(t,1<arguments.length?arguments[1]:void 0)}}),se(se.P,"String",{repeat:_r});var _i="startsWith",ki=""[_i];se(se.P+se.F*yi(_i),"String",{startsWith:function(t){var e=gi(this,t,_i),n=xe(Math.min(1<arguments.length?arguments[1]:void 0,e.length)),r=String(t);return ki?ki.call(e,r,n):e.slice(n,n+r.length)===r}});function Ei(t,e,n,r){var i=String(Nt(t)),o="<"+e;return""!==n&&(o+=" "+n+'="'+String(r).replace(Oi,"&quot;")+'"'),o+">"+i+"</"+e+">"}function Fi(e,t){var n={};n[e]=t(Ei),se(se.P+se.F*Wt(function(){var t=""[e]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",n)}var Oi=/"/g;Fi("anchor",function(e){return function(t){return e(this,"a","name",t)}}),Fi("big",function(t){return function(){return t(this,"big","","")}}),Fi("blink",function(t){return function(){return t(this,"blink","","")}}),Fi("bold",function(t){return function(){return t(this,"b","","")}}),Fi("fixed",function(t){return function(){return t(this,"tt","","")}}),Fi("fontcolor",function(e){return function(t){return e(this,"font","color",t)}}),Fi("fontsize",function(e){return function(t){return e(this,"font","size",t)}}),Fi("italics",function(t){return function(){return t(this,"i","","")}}),Fi("link",function(e){return function(t){return e(this,"a","href",t)}}),Fi("small",function(t){return function(){return t(this,"small","","")}}),Fi("strike",function(t){return function(){return t(this,"strike","","")}}),Fi("sub",function(t){return function(){return t(this,"sub","","")}}),Fi("sup",function(t){return function(){return t(this,"sup","","")}}),se(se.S,"Date",{now:function(){return(new Date).getTime()}}),se(se.P+se.F*Wt(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=ie(this),n=Vt(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}});function Pi(t){return 9<t?t:"0"+t}var ji=Date.prototype.getTime,Li=Date.prototype.toISOString,Ai=Wt(function(){return"0385-07-25T07:06:39.999Z"!=Li.call(new Date(-5e13-1))})||!Wt(function(){Li.call(new Date(NaN))})?function(){if(!isFinite(ji.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":9999<e?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+Pi(t.getUTCMonth()+1)+"-"+Pi(t.getUTCDate())+"T"+Pi(t.getUTCHours())+":"+Pi(t.getUTCMinutes())+":"+Pi(t.getUTCSeconds())+"."+(99<n?n:"0"+Pi(n))+"Z"}:Li;se(se.P+se.F*(Date.prototype.toISOString!==Ai),"Date",{toISOString:Ai});var Ti=Date.prototype,Mi="Invalid Date",Ii="toString",$i=Ti[Ii],Ri=Ti.getTime;new Date(NaN)+""!=Mi&&At(Ti,Ii,function(){var t=Ri.call(this);return t==t?$i.call(this):Mi});var Ni=le("toPrimitive"),Ci=Date.prototype;Ni in Ci||Qt(Ci,Ni,function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return Vt(St(this),"number"!=t)}),se(se.S,"Array",{isArray:Ae});function Di(e,t,n,r){try{return r?t(St(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&St(i.call(e)),t}}function qi(t){return void 0!==t&&(oi.Array===t||Gi[Bi]===t)}function Ui(t,e,n){e in t?Jt.f(t,e,Xt(0,n)):t[e]=n}var Bi=le("iterator"),Gi=Array.prototype,Wi=le("iterator"),Vi=xt.getIteratorMethod=function(t){if(null!=t)return t[Wi]||t["@@iterator"]||oi[Mn(t)]},zi=le("iterator"),Hi=!1;try{var Yi=[7][zi]();Yi.return=function(){Hi=!0},Array.from(Yi,function(){throw 2})}catch(t){}function Ki(t,e){if(!e&&!Hi)return!1;var n=!1;try{var r=[7],i=r[zi]();i.next=function(){return{done:n=!0}},r[zi]=function(){return i},t(r)}catch(t){}return n}se(se.S+se.F*!Ki(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,r,i,o=ie(t),a="function"==typeof this?this:Array,c=arguments.length,u=1<c?arguments[1]:void 0,s=void 0!==u,f=0,l=Vi(o);if(s&&(u=te(u,2<c?arguments[2]:void 0,2)),null==l||a==Array&&qi(l))for(n=new a(e=xe(o.length));f<e;f++)Ui(n,f,s?u(o[f],f):o[f]);else for(i=l.call(o),n=new a;!(r=i.next()).done;f++)Ui(n,f,s?Di(i,u,[r.value,f],!0):r.value);return n.length=f,n}}),se(se.S+se.F*Wt(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);t<e;)Ui(n,t,arguments[t++]);return n.length=e,n}});function Zi(t,e){return!!t&&Wt(function(){e?t.call(null,function(){},1):t.call(null)})}var Ji=[].join;se(se.P+se.F*(ye!=Object||!Zi(Ji)),"Array",{join:function(t){return Ji.call(Ct(this),void 0===t?",":t)}});var Xi=[].slice;se(se.P+se.F*Wt(function(){Ie&&Xi.call(Ie)}),"Array",{slice:function(t,e){var n=xe(this.length),r=Rt(this);if(e=void 0===e?n:e,"Array"==r)return Xi.call(this,t,e);for(var i=ne(t,n),o=ne(e,n),a=xe(o-i),c=new Array(a),u=0;u<a;u++)c[u]="String"==r?this.charAt(i+u):this[i+u];return c}});var Qi=[].sort,to=[1,2,3];se(se.P+se.F*(Wt(function(){to.sort(void 0)})||!Wt(function(){to.sort(null)})||!Zi(Qi)),"Array",{sort:function(t){return void 0===t?Qi.call(ie(this)):Qi.call(ie(this),$(t))}});function eo(t,e){return new(function(t){var e;return Ae(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!Ae(e.prototype)||(e=void 0),!Zt(e)||null===(e=e[ro])&&(e=void 0)),void 0===e?Array:e}(t))(e)}function no(l,t){var h=1==l,p=2==l,d=3==l,v=4==l,g=6==l,y=5==l||g,m=t||eo;return function(t,e,n){for(var r,i,o=ie(t),a=ye(o),c=te(e,n,3),u=xe(a.length),s=0,f=h?m(t,u):p?m(t,0):void 0;s<u;s++)if((y||s in a)&&(i=c(r=a[s],s,o),l))if(h)f[s]=i;else if(i)switch(l){case 3:return!0;case 5:return r;case 6:return s;case 2:f.push(r)}else if(v)return!1;return g?-1:d||v?v:f}}var ro=le("species"),io=no(0),oo=Zi([].forEach,!0);se(se.P+se.F*!oo,"Array",{forEach:function(t){return io(this,t,arguments[1])}});var ao=no(1);se(se.P+se.F*!Zi([].map,!0),"Array",{map:function(t){return ao(this,t,arguments[1])}});var co=no(2);se(se.P+se.F*!Zi([].filter,!0),"Array",{filter:function(t){return co(this,t,arguments[1])}});var uo=no(3);se(se.P+se.F*!Zi([].some,!0),"Array",{some:function(t){return uo(this,t,arguments[1])}});var so=no(4);se(se.P+se.F*!Zi([].every,!0),"Array",{every:function(t){return so(this,t,arguments[1])}});function fo(t,e,n,r,i){$(e);var o=ie(t),a=ye(o),c=xe(o.length),u=i?c-1:0,s=i?-1:1;if(n<2)for(;;){if(u in a){r=a[u],u+=s;break}if(u+=s,i?u<0:c<=u)throw TypeError("Reduce of empty array with no initial value")}for(;i?0<=u:u<c;u+=s)u in a&&(r=e(r,a[u],u,o));return r}se(se.P+se.F*!Zi([].reduce,!0),"Array",{reduce:function(t){return fo(this,t,arguments.length,arguments[1],!1)}}),se(se.P+se.F*!Zi([].reduceRight,!0),"Array",{reduceRight:function(t){return fo(this,t,arguments.length,arguments[1],!0)}});var lo=re(!1),ho=[].indexOf,po=!!ho&&1/[1].indexOf(1,-0)<0;se(se.P+se.F*(po||!Zi(ho)),"Array",{indexOf:function(t){return po?ho.apply(this,arguments)||0:lo(this,t,arguments[1])}});var vo=[].lastIndexOf,go=!!vo&&1/[1].lastIndexOf(1,-0)<0;se(se.P+se.F*(go||!Zi(vo)),"Array",{lastIndexOf:function(t){if(go)return vo.apply(this,arguments)||0;var e=Ct(this),n=xe(e.length),r=n-1;for(1<arguments.length&&(r=Math.min(r,ee(arguments[1]))),r<0&&(r=n+r);0<=r;r--)if(r in e&&e[r]===t)return r||0;return-1}});var yo=[].copyWithin||function(t,e){var n=ie(this),r=xe(n.length),i=ne(t,r),o=ne(e,r),a=2<arguments.length?arguments[2]:void 0,c=Math.min((void 0===a?r:ne(a,r))-o,r-i),u=1;for(o<i&&i<o+c&&(u=-1,o+=c-1,i+=c-1);0<c--;)o in n?n[i]=n[o]:delete n[i],i+=u,o+=u;return n},mo=le("unscopables"),bo=Array.prototype;null==bo[mo]&&Qt(bo,mo,{});function wo(t){bo[mo][t]=!0}se(se.P,"Array",{copyWithin:yo}),wo("copyWithin");function xo(t){for(var e=ie(this),n=xe(e.length),r=arguments.length,i=ne(1<r?arguments[1]:void 0,n),o=2<r?arguments[2]:void 0,a=void 0===o?n:ne(o,n);i<a;)e[i++]=t;return e}se(se.P,"Array",{fill:xo}),wo("fill");var So=no(5),_o="find",ko=!0;_o in[]&&Array(1)[_o](function(){ko=!1}),se(se.P+se.F*ko,"Array",{find:function(t){return So(this,t,1<arguments.length?arguments[1]:void 0)}}),wo(_o);var Eo=no(6),Fo="findIndex",Oo=!0;Fo in[]&&Array(1)[Fo](function(){Oo=!1}),se(se.P+se.F*Oo,"Array",{findIndex:function(t){return Eo(this,t,1<arguments.length?arguments[1]:void 0)}}),wo(Fo);function Po(t){var e=Ht[t];Kt&&e&&!e[jo]&&Jt.f(e,jo,{configurable:!0,get:function(){return this}})}var jo=le("species");Po("Array");function Lo(t,e){return{value:e,done:!!t}}var Ao=si(Array,"Array",function(t,e){this._t=Ct(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Lo(1)):Lo(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");oi.Arguments=oi.Array,wo("keys"),wo("values"),wo("entries");function To(){var t=St(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}var Mo=Jt.f,Io=qe.f,$o=Ht.RegExp,Ro=$o,No=$o.prototype,Co=/a/g,Do=/a/g,qo=new $o(Co)!==Co;if(Kt&&(!qo||Wt(function(){return Do[le("match")]=!1,$o(Co)!=Co||$o(Do)==Do||"/a/i"!=$o(Co,"i")}))){$o=function(t,e){var n=this instanceof $o,r=vi(t),i=void 0===e;return!n&&r&&t.constructor===$o&&i?t:ar(qo?new Ro(r&&!i?t.source:t,e):Ro((r=t instanceof $o)?t.source:t,r&&i?To.call(t):e),n?this:No,$o)};for(var Uo=function(e){e in $o||Mo($o,e,{configurable:!0,get:function(){return Ro[e]},set:function(t){Ro[e]=t}})},Bo=Io(Ro),Go=0;Bo.length>Go;)Uo(Bo[Go++]);(No.constructor=$o).prototype=No,At(Ht,"RegExp",$o)}Po("RegExp");var Wo,Vo,zo=RegExp.prototype.exec,Ho=String.prototype.replace,Yo=zo,Ko="lastIndex",Zo=(Wo=/a/,Vo=/b*/g,zo.call(Wo,"a"),zo.call(Vo,"a"),0!==Wo[Ko]||0!==Vo[Ko]),Jo=void 0!==/()??/.exec("")[1];(Zo||Jo)&&(Yo=function(t){var e,n,r,i,o=this;return Jo&&(n=new RegExp("^"+o.source+"$(?!\\s)",To.call(o))),Zo&&(e=o[Ko]),r=zo.call(o,t),Zo&&r&&(o[Ko]=o.global?r.index+r[0].length:e),Jo&&r&&1<r.length&&Ho.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r});var Xo=Yo;se({target:"RegExp",proto:!0,forced:Xo!==/./.exec},{exec:Xo}),Kt&&"g"!=/./g.flags&&Jt.f(RegExp.prototype,"flags",{configurable:!0,get:To});function Qo(t){At(RegExp.prototype,ta,t,!0)}var ta="toString",ea=/./[ta];Wt(function(){return"/a/b"!=ea.call({source:"a",flags:"b"})})?Qo(function(){var t=St(this);return"/".concat(t.source,"/","flags"in t?t.flags:!Kt&&t instanceof RegExp?To.call(t):void 0)}):ea.name!=ta&&Qo(function(){return ea.call(this)});function na(t,e,n){return e+(n?oa(t,e).length:1)}function ra(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==Mn(t))throw new TypeError("RegExp#exec called on incompatible receiver");return aa.call(t,e)}function ia(n,t,e){var r=le(n),o=!Wt(function(){var t={};return t[r]=function(){return 7},7!=""[n](t)}),i=o?!Wt(function(){var t=!1,e=/a/;return e.exec=function(){return t=!0,null},"split"===n&&(e.constructor={},e.constructor[ca]=function(){return e}),e[r](""),!t}):void 0;if(!o||!i||"replace"===n&&!ua||"split"===n&&!sa){var a=/./[r],c=e(Nt,r,""[n],function(t,e,n,r,i){return e.exec===Xo?o&&!i?{done:!0,value:a.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),u=c[0],s=c[1];At(String.prototype,n,u),Qt(RegExp.prototype,r,2==t?function(t,e){return s.call(t,this,e)}:function(t){return s.call(t,this)})}}var oa=ii(!0),aa=RegExp.prototype.exec,ca=le("species"),ua=!Wt(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),sa=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();ia("match",1,function(r,i,s,f){return[function(t){var e=r(this),n=null==t?void 0:t[i];return void 0!==n?n.call(t,e):new RegExp(t)[i](String(e))},function(t){var e=f(s,t,this);if(e.done)return e.value;var n=St(t),r=String(this);if(!n.global)return ra(n,r);for(var i,o=n.unicode,a=[],c=n.lastIndex=0;null!==(i=ra(n,r));){var u=String(i[0]);""===(a[c]=u)&&(n.lastIndex=na(r,xe(n.lastIndex),o)),c++}return 0===c?null:a}]});var fa=Math.max,la=Math.min,ha=Math.floor,pa=/\$([$&`']|\d\d?|<[^>]*>)/g,da=/\$([$&`']|\d\d?)/g;ia("replace",2,function(i,o,x,S){return[function(t,e){var n=i(this),r=null==t?void 0:t[o];return void 0!==r?r.call(t,n,e):x.call(String(n),t,e)},function(t,e){var n=S(x,t,this,e);if(n.done)return n.value;var r=St(t),i=String(this),o="function"==typeof e;o||(e=String(e));var a=r.global;if(a){var c=r.unicode;r.lastIndex=0}for(var u=[];;){var s=ra(r,i);if(null===s)break;if(u.push(s),!a)break;""===String(s[0])&&(r.lastIndex=na(i,xe(r.lastIndex),c))}for(var f,l="",h=0,p=0;p<u.length;p++){s=u[p];for(var d=String(s[0]),v=fa(la(ee(s.index),i.length),0),g=[],y=1;y<s.length;y++)g.push(void 0===(f=s[y])?f:String(f));var m=s.groups;if(o){var b=[d].concat(g,v,i);void 0!==m&&b.push(m);var w=String(e.apply(void 0,b))}else w=_(d,i,v,g,m,e);h<=v&&(l+=i.slice(h,v)+w,h=v+d.length)}return l+i.slice(h)}];function _(o,a,c,u,s,t){var f=c+o.length,l=u.length,e=da;return void 0!==s&&(s=ie(s),e=pa),x.call(t,e,function(t,e){var n;switch(e.charAt(0)){case"$":return"$";case"&":return o;case"`":return a.slice(0,c);case"'":return a.slice(f);case"<":n=s[e.slice(1,-1)];break;default:var r=+e;if(0==r)return t;if(l<r){var i=ha(r/10);return 0===i?t:i<=l?void 0===u[i-1]?e.charAt(1):u[i-1]+e.charAt(1):t}n=u[r-1]}return void 0===n?"":n})}}),ia("search",1,function(r,i,a,c){return[function(t){var e=r(this),n=null==t?void 0:t[i];return void 0!==n?n.call(t,e):new RegExp(t)[i](String(e))},function(t){var e=c(a,t,this);if(e.done)return e.value;var n=St(t),r=String(this),i=n.lastIndex;Ln(i,0)||(n.lastIndex=0);var o=ra(n,r);return Ln(n.lastIndex,i)||(n.lastIndex=i),null===o?-1:o.index}]});function va(t,e){var n,r=St(t).constructor;return void 0===r||null==(n=St(r)[ga])?e:$(n)}var ga=le("species"),ya=Math.min,ma=[].push,ba="split",wa="length",xa="lastIndex",Sa=4294967295,_a=!Wt(function(){RegExp(Sa,"y")});ia("split",2,function(i,o,g,y){var m;return m="c"=="abbc"[ba](/(b)*/)[1]||4!="test"[ba](/(?:)/,-1)[wa]||2!="ab"[ba](/(?:ab)*/)[wa]||4!="."[ba](/(.?)(.?)/)[wa]||1<"."[ba](/()()/)[wa]||""[ba](/.?/)[wa]?function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!vi(t))return g.call(n,t,e);for(var r,i,o,a=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,s=void 0===e?Sa:e>>>0,f=new RegExp(t.source,c+"g");(r=Xo.call(f,n))&&!(u<(i=f[xa])&&(a.push(n.slice(u,r.index)),1<r[wa]&&r.index<n[wa]&&ma.apply(a,r.slice(1)),o=r[0][wa],u=i,a[wa]>=s));)f[xa]===r.index&&f[xa]++;return u===n[wa]?!o&&f.test("")||a.push(""):a.push(n.slice(u)),a[wa]>s?a.slice(0,s):a}:"0"[ba](void 0,0)[wa]?function(t,e){return void 0===t&&0===e?[]:g.call(this,t,e)}:g,[function(t,e){var n=i(this),r=null==t?void 0:t[o];return void 0!==r?r.call(t,n,e):m.call(String(n),t,e)},function(t,e){var n=y(m,t,this,e,m!==g);if(n.done)return n.value;var r=St(t),i=String(this),o=va(r,RegExp),a=r.unicode,c=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(_a?"y":"g"),u=new o(_a?r:"^(?:"+r.source+")",c),s=void 0===e?Sa:e>>>0;if(0==s)return[];if(0===i.length)return null===ra(u,i)?[i]:[];for(var f=0,l=0,h=[];l<i.length;){u.lastIndex=_a?l:0;var p,d=ra(u,_a?i:i.slice(l));if(null===d||(p=ya(xe(u.lastIndex+(_a?0:l)),i.length))===f)l=na(i,l,a);else{if(h.push(i.slice(f,l)),h.length===s)return h;for(var v=1;v<=d.length-1;v++)if(h.push(d[v]),h.length===s)return h;l=f=p}}return h.push(i.slice(f)),h}]});function ka(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}function Ea(){var t=+this;if(Na.hasOwnProperty(t)){var e=Na[t];delete Na[t],e()}}function Fa(t){Ea.call(t.data)}var Oa,Pa,ja,La=e(function(t){var h={},p={},e=t.exports=function(t,e,n,r,i){var o,a,c,u,s=i?function(){return t}:Vi(t),f=te(n,r,e?2:1),l=0;if("function"!=typeof s)throw TypeError(t+" is not iterable!");if(qi(s)){for(o=xe(t.length);l<o;l++)if((u=e?f(St(a=t[l])[0],a[1]):f(t[l]))===h||u===p)return u}else for(c=s.call(t);!(a=c.next()).done;)if((u=Di(c,f,a.value,e))===h||u===p)return u};e.BREAK=h,e.RETURN=p}),Aa=Ht.process,Ta=Ht.setImmediate,Ma=Ht.clearImmediate,Ia=Ht.MessageChannel,$a=Ht.Dispatch,Ra=0,Na={},Ca="onreadystatechange";Ta&&Ma||(Ta=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return Na[++Ra]=function(){Nn("function"==typeof t?t:Function(t),e)},Oa(Ra),Ra},Ma=function(t){delete Na[t]},"process"==Rt(Aa)?Oa=function(t){Aa.nextTick(te(Ea,t,1))}:$a&&$a.now?Oa=function(t){$a.now(te(Ea,t,1))}:Ia?(ja=(Pa=new Ia).port2,Pa.port1.onmessage=Fa,Oa=te(ja.postMessage,ja,1)):Ht.addEventListener&&"function"==typeof postMessage&&!Ht.importScripts?(Oa=function(t){Ht.postMessage(t+"","*")},Ht.addEventListener("message",Fa,!1)):Oa=Ca in I("script")?function(t){Ie.appendChild(I("script"))[Ca]=function(){Ie.removeChild(this),Ea.call(t)}}:function(t){setTimeout(te(Ea,t,1),0)});var Da={set:Ta,clear:Ma},qa=Da.set,Ua=Ht.MutationObserver||Ht.WebKitMutationObserver,Ba=Ht.process,Ga=Ht.Promise,Wa="process"==Rt(Ba);function Va(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=$(n),this.reject=$(r)}function za(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}function Ha(t,e){if(St(t),Zt(e)&&e.constructor===t)return e;var n=rc.f(t);return(0,n.resolve)(e),n.promise}function Ya(t,e,n){for(var r in e)At(t,r,e[r],n);return t}function Ka(){}function Za(t){var e;return!(!Zt(t)||"function"!=typeof(e=t.then))&&e}function Ja(f,n){if(!f._n){f._n=!0;var r=f._c;cc(function(){for(var u=f._v,s=1==f._s,t=0,e=function(t){var e,n,r,i=s?t.ok:t.fail,o=t.resolve,a=t.reject,c=t.domain;try{i?(s||(2==f._h&&bc(f),f._h=1),!0===i?e=u:(c&&c.enter(),e=i(u),c&&(c.exit(),r=!0)),e===t.promise?a(sc("Promise-chain cycle")):(n=Za(e))?n.call(e,o,a):o(e)):a(u)}catch(t){c&&!r&&c.exit(),a(t)}};r.length>t;)e(r[t++]);f._c=[],f._n=!1,n&&!f._h&&yc(f)})}}function Xa(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Ja(e,!0))}var Qa,tc,ec,nc,rc={f:function(t){return new Va(t)}},ic=Ht.navigator,oc=ic&&ic.userAgent||"",ac=Da.set,cc=function(){function t(){var t,e;for(Wa&&(t=Ba.domain)&&t.exit();n;){e=n.fn,n=n.next;try{e()}catch(t){throw n?i():r=void 0,t}}r=void 0,t&&t.enter()}var n,r,i;if(Wa)i=function(){Ba.nextTick(t)};else if(!Ua||Ht.navigator&&Ht.navigator.standalone)if(Ga&&Ga.resolve){var e=Ga.resolve(void 0);i=function(){e.then(t)}}else i=function(){qa.call(Ht,t)};else{var o=!0,a=document.createTextNode("");new Ua(t).observe(a,{characterData:!0}),i=function(){a.data=o=!o}}return function(t){var e={fn:t,next:void 0};r&&(r.next=e),n||(n=e,i()),r=e}}(),uc="Promise",sc=Ht.TypeError,fc=Ht.process,lc=fc&&fc.versions,hc=lc&&lc.v8||"",pc=Ht[uc],dc="process"==Mn(fc),vc=tc=rc.f,gc=!!function(){try{var t=pc.resolve(1),e=(t.constructor={})[le("species")]=function(t){t(Ka,Ka)};return(dc||"function"==typeof PromiseRejectionEvent)&&t.then(Ka)instanceof e&&0!==hc.indexOf("6.6")&&-1===oc.indexOf("Chrome/66")}catch(t){}}(),yc=function(o){ac.call(Ht,function(){var t,e,n,r=o._v,i=mc(o);if(i&&(t=za(function(){dc?fc.emit("unhandledRejection",r,o):(e=Ht.onunhandledrejection)?e({promise:o,reason:r}):(n=Ht.console)&&n.error&&n.error("Unhandled promise rejection",r)}),o._h=dc||mc(o)?2:1),o._a=void 0,i&&t.e)throw t.v})},mc=function(t){return 1!==t._h&&0===(t._a||t._c).length},bc=function(e){ac.call(Ht,function(){var t;dc?fc.emit("rejectionHandled",e):(t=Ht.onrejectionhandled)&&t({promise:e,reason:e._v})})},wc=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw sc("Promise can't be resolved itself");(n=Za(t))?cc(function(){var e={_w:r,_d:!1};try{n.call(t,te(wc,e,1),te(Xa,e,1))}catch(t){Xa.call(e,t)}}):(r._v=t,r._s=1,Ja(r,!1))}catch(t){Xa.call({_w:r,_d:!1},t)}}};gc||(pc=function(t){ka(this,pc,uc,"_h"),$(t),Qa.call(this);try{t(te(wc,this,1),te(Xa,this,1))}catch(t){Xa.call(this,t)}},(Qa=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=Ya(pc.prototype,{then:function(t,e){var n=vc(va(this,pc));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=dc?fc.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Ja(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),ec=function(){var t=new Qa;this.promise=t,this.resolve=te(wc,t,1),this.reject=te(Xa,t,1)},rc.f=vc=function(t){return t===pc||t===nc?new ec(t):tc(t)}),se(se.G+se.W+se.F*!gc,{Promise:pc}),It(pc,uc),Po(uc),nc=xt[uc],se(se.S+se.F*!gc,uc,{reject:function(t){var e=vc(this);return(0,e.reject)(t),e.promise}}),se(se.S+se.F*!gc,uc,{resolve:function(t){return Ha(this,t)}}),se(se.S+se.F*!(gc&&Ki(function(t){pc.all(t).catch(Ka)})),uc,{all:function(t){var a=this,e=vc(a),c=e.resolve,u=e.reject,n=za(function(){var r=[],i=0,o=1;La(t,!1,function(t){var e=i++,n=!1;r.push(void 0),o++,a.resolve(t).then(function(t){n||(n=!0,r[e]=t,--o||c(r))},u)}),--o||c(r)});return n.e&&u(n.v),e.promise},race:function(t){var e=this,n=vc(e),r=n.reject,i=za(function(){La(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}});function xc(t,e){if(!Zt(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}function Sc(t,e){var n,r=Oc(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n}function _c(r,t,e,n,i,o){function a(t){var n=f[t];At(f,t,"delete"==t?function(t){return!(o&&!Zt(t))&&n.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!Zt(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!Zt(t)?void 0:n.call(this,0===t?0:t)}:"add"==t?function(t){return n.call(this,0===t?0:t),this}:function(t,e){return n.call(this,0===t?0:t,e),this})}var c=Ht[r],u=c,s=i?"set":"add",f=u&&u.prototype,l={};if("function"==typeof u&&(o||f.forEach&&!Wt(function(){(new u).entries().next()}))){var h=new u,p=h[s](o?{}:-0,1)!=h,d=Wt(function(){h.has(1)}),v=Ki(function(t){new u(t)}),g=!o&&Wt(function(){for(var t=new u,e=5;e--;)t[s](e,e);return!t.has(-0)});v||(((u=t(function(t,e){ka(t,u,r);var n=ar(new c,t,u);return null!=e&&La(e,i,n[s],n),n})).prototype=f).constructor=u),(d||g)&&(a("delete"),a("has"),i&&a("get")),(g||p)&&a(s),o&&f.clear&&delete f.clear}else u=n.getConstructor(t,r,i,s),Ya(u.prototype,e),fe.NEED=!0;return It(u,r),l[r]=u,se(se.G+se.W+se.F*(u!=c),l),o||n.setStrong(u,r,i),u}function kc(t){return t._l||(t._l=new Ic)}function Ec(t,e){return Ac(t.a,function(t){return t[0]===e})}var Fc=Jt.f,Oc=fe.fastKey,Pc=Kt?"_s":"size",jc={getConstructor:function(t,o,n,r){var i=t(function(t,e){ka(t,i,o,"_i"),t._t=o,t._i=Ce(null),t._f=void 0,t._l=void 0,t[Pc]=0,null!=e&&La(e,n,t[r],t)});return Ya(i.prototype,{clear:function(){for(var t=xc(this,o),e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[Pc]=0},delete:function(t){var e=xc(this,o),n=Sc(e,t);if(n){var r=n.n,i=n.p;delete e._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),e._f==n&&(e._f=r),e._l==n&&(e._l=i),e[Pc]--}return!!n},forEach:function(t){xc(this,o);for(var e,n=te(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!Sc(xc(this,o),t)}}),Kt&&Fc(i.prototype,"size",{get:function(){return xc(this,o)[Pc]}}),i},def:function(t,e,n){var r,i,o=Sc(t,e);return o?o.v=n:(t._l=o={i:i=Oc(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[Pc]++,"F"!==i&&(t._i[i]=o)),t},getEntry:Sc,setStrong:function(t,n,e){si(t,n,function(t,e){this._t=xc(t,n),this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?Lo(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=void 0,Lo(1))},e?"entries":"values",!e,!0),Po(n)}},Lc=(_c("Map",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{get:function(t){var e=jc.getEntry(xc(this,"Map"),t);return e&&e.v},set:function(t,e){return jc.def(xc(this,"Map"),0===t?0:t,e)}},jc,!0),_c("Set",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return jc.def(xc(this,"Set"),t=0===t?0:t,t)}},jc),fe.getWeak),Ac=no(5),Tc=no(6),Mc=0,Ic=function(){this.a=[]};Ic.prototype={get:function(t){var e=Ec(this,t);if(e)return e[1]},has:function(t){return!!Ec(this,t)},set:function(t,e){var n=Ec(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(e){var t=Tc(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}};var $c={getConstructor:function(t,n,r,i){var o=t(function(t,e){ka(t,o,n,"_i"),t._t=n,t._i=Mc++,t._l=void 0,null!=e&&La(e,r,t[i],t)});return Ya(o.prototype,{delete:function(t){if(!Zt(t))return!1;var e=Lc(t);return!0===e?kc(xc(this,n)).delete(t):e&&Yt(e,this._i)&&delete e[this._i]},has:function(t){if(!Zt(t))return!1;var e=Lc(t);return!0===e?kc(xc(this,n)).has(t):e&&Yt(e,this._i)}}),o},def:function(t,e,n){var r=Lc(St(e),!0);return!0===r?kc(t).set(e,n):r[t._i]=n,t},ufstore:kc},Rc=(e(function(t){function e(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}}var o,n=no(0),r=!Ht.ActiveXObject&&"ActiveXObject"in Ht,i="WeakMap",a=fe.getWeak,c=Object.isExtensible,u=$c.ufstore,s={get:function(t){if(Zt(t)){var e=a(t);return!0===e?u(xc(this,i)).get(t):e?e[this._i]:void 0}},set:function(t,e){return $c.def(xc(this,i),t,e)}},f=t.exports=_c(i,e,s,$c,!0,!0);r&&(o=$c.getConstructor(e,i),jn(o.prototype,s),fe.NEED=!0,n(["delete","has","get","set"],function(r){var t=f.prototype,i=t[r];At(t,r,function(t,e){if(!Zt(t)||c(t))return i.call(this,t,e);this._f||(this._f=new o);var n=this._f[r](t,e);return"set"==r?this:n})}))}),"WeakSet");_c(Rc,function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return $c.def(xc(this,Rc),t,!0)}},$c,!1,!0);for(var Nc,Cc=zt("typed_array"),Dc=zt("view"),qc=!(!Ht.ArrayBuffer||!Ht.DataView),Uc=qc,Bc=0,Gc="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");Bc<9;)(Nc=Ht[Gc[Bc++]])?(Qt(Nc.prototype,Cc,!0),Qt(Nc.prototype,Dc,!0)):Uc=!1;function Wc(t){if(void 0===t)return 0;var e=ee(t),n=xe(e);if(e!==n)throw RangeError("Wrong length!");return n}var Vc={ABV:qc,CONSTR:Uc,TYPED:Cc,VIEW:Dc},zc=e(function(t,e){var n=qe.f,r=Jt.f,i="ArrayBuffer",o="DataView",a="prototype",l="Wrong index!",c=Ht[i],u=Ht[o],s=Ht.Math,h=Ht.RangeError,p=Ht.Infinity,f=c,d=s.abs,v=s.pow,g=s.floor,y=s.log,m=s.LN2,b="byteLength",w="byteOffset",x=Kt?"_b":"buffer",S=Kt?"_l":b,_=Kt?"_o":w;function k(t,e,n){var r,i,o,a=new Array(n),c=8*n-e-1,u=(1<<c)-1,s=u>>1,f=23===e?v(2,-24)-v(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for((t=d(t))!=t||t===p?(i=t!=t?1:0,r=u):(r=g(y(t)/m),t*(o=v(2,-r))<1&&(r--,o*=2),2<=(t+=1<=r+s?f/o:f*v(2,1-s))*o&&(r++,o/=2),u<=r+s?(i=0,r=u):1<=r+s?(i=(t*o-1)*v(2,e),r+=s):(i=t*v(2,s-1)*v(2,e),r=0));8<=e;a[l++]=255&i,i/=256,e-=8);for(r=r<<e|i,c+=e;0<c;a[l++]=255&r,r/=256,c-=8);return a[--l]|=128*h,a}function E(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,a=o>>1,c=i-7,u=n-1,s=t[u--],f=127&s;for(s>>=7;0<c;f=256*f+t[u],u--,c-=8);for(r=f&(1<<-c)-1,f>>=-c,c+=e;0<c;r=256*r+t[u],u--,c-=8);if(0===f)f=1-a;else{if(f===o)return r?NaN:s?-p:p;r+=v(2,e),f-=a}return(s?-1:1)*r*v(2,f-e)}function F(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function O(t){return[255&t]}function P(t){return[255&t,t>>8&255]}function j(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function L(t){return k(t,52,8)}function A(t){return k(t,23,4)}function T(t,e,n){r(t[a],e,{get:function(){return this[n]}})}function M(t,e,n,r){var i=Wc(+n);if(i+e>t[S])throw h(l);var o=t[x]._b,a=i+t[_],c=o.slice(a,a+e);return r?c:c.reverse()}function I(t,e,n,r,i,o){var a=Wc(+n);if(a+e>t[S])throw h(l);for(var c=t[x]._b,u=a+t[_],s=r(+i),f=0;f<e;f++)c[u+f]=s[o?f:e-f-1]}if(Vc.ABV){if(!Wt(function(){c(1)})||!Wt(function(){new c(-1)})||Wt(function(){return new c,new c(1.5),new c(NaN),c.name!=i})){for(var $,R=(c=function(t){return ka(this,c),new f(Wc(t))})[a]=f[a],N=n(f),C=0;N.length>C;)($=N[C++])in c||Qt(c,$,f[$]);R.constructor=c}var D=new u(new c(2)),q=u[a].setInt8;D.setInt8(0,2147483648),D.setInt8(1,2147483649),!D.getInt8(0)&&D.getInt8(1)||Ya(u[a],{setInt8:function(t,e){q.call(this,t,e<<24>>24)},setUint8:function(t,e){q.call(this,t,e<<24>>24)}},!0)}else c=function(t){ka(this,c,i);var e=Wc(t);this._b=xo.call(new Array(e),0),this[S]=e},u=function(t,e,n){ka(this,u,o),ka(t,c,o);var r=t[S],i=ee(e);if(i<0||r<i)throw h("Wrong offset!");if(r<i+(n=void 0===n?r-i:xe(n)))throw h("Wrong length!");this[x]=t,this[_]=i,this[S]=n},Kt&&(T(c,b,"_l"),T(u,"buffer","_b"),T(u,b,"_l"),T(u,w,"_o")),Ya(u[a],{getInt8:function(t){return M(this,1,t)[0]<<24>>24},getUint8:function(t){return M(this,1,t)[0]},getInt16:function(t){var e=M(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=M(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return F(M(this,4,t,arguments[1]))},getUint32:function(t){return F(M(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return E(M(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return E(M(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){I(this,1,t,O,e)},setUint8:function(t,e){I(this,1,t,O,e)},setInt16:function(t,e){I(this,2,t,P,e,arguments[2])},setUint16:function(t,e){I(this,2,t,P,e,arguments[2])},setInt32:function(t,e){I(this,4,t,j,e,arguments[2])},setUint32:function(t,e){I(this,4,t,j,e,arguments[2])},setFloat32:function(t,e){I(this,4,t,A,e,arguments[2])},setFloat64:function(t,e){I(this,8,t,L,e,arguments[2])}});It(c,i),It(u,o),Qt(u[a],Vc.VIEW,!0),e[i]=c,e[o]=u}),Hc=Ht.ArrayBuffer,Yc=zc.ArrayBuffer,Kc=zc.DataView,Zc=Vc.ABV&&Hc.isView,Jc=Yc.prototype.slice,Xc=Vc.VIEW,Qc="ArrayBuffer";se(se.G+se.W+se.F*(Hc!==Yc),{ArrayBuffer:Yc}),se(se.S+se.F*!Vc.CONSTR,Qc,{isView:function(t){return Zc&&Zc(t)||Zt(t)&&Xc in t}}),se(se.P+se.U+se.F*Wt(function(){return!new Yc(2).slice(1,void 0).byteLength}),Qc,{slice:function(t,e){if(void 0!==Jc&&void 0===e)return Jc.call(St(this),t);for(var n=St(this).byteLength,r=ne(t,n),i=ne(void 0===e?n:e,n),o=new(va(this,Yc))(xe(i-r)),a=new Kc(this),c=new Kc(o),u=0;r<i;)c.setUint8(u++,a.getUint8(r++));return o}}),Po(Qc),se(se.G+se.W+se.F*!Vc.ABV,{DataView:zc.DataView});var tu=e(function(t){if(Kt){var y=Ht,m=Wt,b=se,w=Vc,e=zc,h=te,x=ka,n=Xt,S=Qt,r=Ya,i=ee,_=xe,k=Wc,o=ne,a=Vt,c=Yt,E=Mn,F=Zt,p=ie,d=qi,O=Ce,P=kn,j=qe.f,v=Vi,u=zt,s=le,f=no,l=re,g=va,L=Ao,A=oi,T=Ki,M=Po,I=xo,$=yo,R=Jt,N=ze,C=R.f,D=N.f,q=y.RangeError,U=y.TypeError,B=y.Uint8Array,G="ArrayBuffer",W="Shared"+G,V="BYTES_PER_ELEMENT",z="prototype",H=Array[z],Y=e.ArrayBuffer,K=e.DataView,Z=f(0),J=f(2),X=f(3),Q=f(4),tt=f(5),et=f(6),nt=l(!0),rt=l(!1),it=L.values,ot=L.keys,at=L.entries,ct=H.lastIndexOf,ut=H.reduce,st=H.reduceRight,ft=H.join,lt=H.sort,ht=H.slice,pt=H.toString,dt=H.toLocaleString,vt=s("iterator"),gt=s("toStringTag"),yt=u("typed_constructor"),mt=u("def_constructor"),bt=w.CONSTR,wt=w.TYPED,xt=w.VIEW,St="Wrong length!",_t=f(1,function(t,e){return Pt(g(t,t[mt]),e)}),kt=m(function(){return 1===new B(new Uint16Array([1]).buffer)[0]}),Et=!!B&&!!B[z].set&&m(function(){new B(1).set({})}),Ft=function(t,e){var n=i(t);if(n<0||n%e)throw q("Wrong offset!");return n},Ot=function(t){if(F(t)&&wt in t)return t;throw U(t+" is not a typed array!")},Pt=function(t,e){if(!(F(t)&&yt in t))throw U("It is not a typed array constructor!");return new t(e)},jt=function(t,e){return Lt(g(t,t[mt]),e)},Lt=function(t,e){for(var n=0,r=e.length,i=Pt(t,r);n<r;)i[n]=e[n++];return i},At=function(t,e,n){C(t,e,{get:function(){return this._d[n]}})},Tt=function(t){var e,n,r,i,o,a,c=p(t),u=arguments.length,s=1<u?arguments[1]:void 0,f=void 0!==s,l=v(c);if(null!=l&&!d(l)){for(a=l.call(c),r=[],e=0;!(o=a.next()).done;e++)r.push(o.value);c=r}for(f&&2<u&&(s=h(s,arguments[2],2)),e=0,n=_(c.length),i=Pt(this,n);e<n;e++)i[e]=f?s(c[e],e):c[e];return i},Mt=function(){for(var t=0,e=arguments.length,n=Pt(this,e);t<e;)n[t]=arguments[t++];return n},It=!!B&&m(function(){dt.call(new B(1))}),$t=function(){return dt.apply(It?ht.call(Ot(this)):Ot(this),arguments)},Rt={copyWithin:function(t,e){return $.call(Ot(this),t,e,2<arguments.length?arguments[2]:void 0)},every:function(t){return Q(Ot(this),t,1<arguments.length?arguments[1]:void 0)},fill:function(t){return I.apply(Ot(this),arguments)},filter:function(t){return jt(this,J(Ot(this),t,1<arguments.length?arguments[1]:void 0))},find:function(t){return tt(Ot(this),t,1<arguments.length?arguments[1]:void 0)},findIndex:function(t){return et(Ot(this),t,1<arguments.length?arguments[1]:void 0)},forEach:function(t){Z(Ot(this),t,1<arguments.length?arguments[1]:void 0)},indexOf:function(t){return rt(Ot(this),t,1<arguments.length?arguments[1]:void 0)},includes:function(t){return nt(Ot(this),t,1<arguments.length?arguments[1]:void 0)},join:function(t){return ft.apply(Ot(this),arguments)},lastIndexOf:function(t){return ct.apply(Ot(this),arguments)},map:function(t){return _t(Ot(this),t,1<arguments.length?arguments[1]:void 0)},reduce:function(t){return ut.apply(Ot(this),arguments)},reduceRight:function(t){return st.apply(Ot(this),arguments)},reverse:function(){for(var t,e=this,n=Ot(e).length,r=Math.floor(n/2),i=0;i<r;)t=e[i],e[i++]=e[--n],e[n]=t;return e},some:function(t){return X(Ot(this),t,1<arguments.length?arguments[1]:void 0)},sort:function(t){return lt.call(Ot(this),t)},subarray:function(t,e){var n=Ot(this),r=n.length,i=o(t,r);return new(g(n,n[mt]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,_((void 0===e?r:o(e,r))-i))}},Nt=function(t,e){return jt(this,ht.call(Ot(this),t,e))},Ct=function(t){Ot(this);var e=Ft(arguments[1],1),n=this.length,r=p(t),i=_(r.length),o=0;if(n<i+e)throw q(St);for(;o<i;)this[e+o]=r[o++]},Dt={entries:function(){return at.call(Ot(this))},keys:function(){return ot.call(Ot(this))},values:function(){return it.call(Ot(this))}},qt=function(t,e){return F(t)&&t[wt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Ut=function(t,e){return qt(t,e=a(e,!0))?n(2,t[e]):D(t,e)},Bt=function(t,e,n){return!(qt(t,e=a(e,!0))&&F(n)&&c(n,"value"))||c(n,"get")||c(n,"set")||n.configurable||c(n,"writable")&&!n.writable||c(n,"enumerable")&&!n.enumerable?C(t,e,n):(t[e]=n.value,t)};bt||(N.f=Ut,R.f=Bt),b(b.S+b.F*!bt,"Object",{getOwnPropertyDescriptor:Ut,defineProperty:Bt}),m(function(){pt.call({})})&&(pt=dt=function(){return ft.call(this)});var Gt=r({},Rt);r(Gt,Dt),S(Gt,vt,Dt.values),r(Gt,{slice:Nt,set:Ct,constructor:function(){},toString:pt,toLocaleString:$t}),At(Gt,"buffer","b"),At(Gt,"byteOffset","o"),At(Gt,"byteLength","l"),At(Gt,"length","e"),C(Gt,gt,{get:function(){return this[wt]}}),t.exports=function(t,l,e,i){function h(t,e){C(t,e,{get:function(){return function(t,e){var n=t._d;return n.v[r](e*l+n.o,kt)}(this,e)},set:function(t){return function(t,e,n){var r=t._d;i&&(n=(n=Math.round(n))<0?0:255<n?255:255&n),r.v[o](e*l+r.o,n,kt)}(this,e,t)},enumerable:!0})}var p=t+((i=!!i)?"Clamped":"")+"Array",r="get"+t,o="set"+t,d=y[p],a=d||{},n=d&&P(d),c=!d||!w.ABV,u={},s=d&&d[z];c?(d=e(function(t,e,n,r){x(t,d,p,"_d");var i,o,a,c,u=0,s=0;if(F(e)){if(!(e instanceof Y||(c=E(e))==G||c==W))return wt in e?Lt(d,e):Tt.call(d,e);i=e,s=Ft(n,l);var f=e.byteLength;if(void 0===r){if(f%l)throw q(St);if((o=f-s)<0)throw q(St)}else if(f<(o=_(r)*l)+s)throw q(St);a=o/l}else a=k(e),i=new Y(o=a*l);for(S(t,"_d",{b:i,o:s,l:o,e:a,v:new K(i)});u<a;)h(t,u++)}),s=d[z]=O(Gt),S(s,"constructor",d)):m(function(){d(1)})&&m(function(){new d(-1)})&&T(function(t){new d,new d(null),new d(1.5),new d(t)},!0)||(d=e(function(t,e,n,r){var i;return x(t,d,p),F(e)?e instanceof Y||(i=E(e))==G||i==W?void 0!==r?new a(e,Ft(n,l),r):void 0!==n?new a(e,Ft(n,l)):new a(e):wt in e?Lt(d,e):Tt.call(d,e):new a(k(e))}),Z(n!==Function.prototype?j(a).concat(j(n)):j(a),function(t){t in d||S(d,t,a[t])}),(d[z]=s).constructor=d);var f=s[vt],v=!!f&&("values"==f.name||null==f.name),g=Dt.values;S(d,yt,!0),S(s,wt,p),S(s,xt,!0),S(s,mt,d),(i?new d(1)[gt]==p:gt in s)||C(s,gt,{get:function(){return p}}),u[p]=d,b(b.G+b.W+b.F*(d!=a),u),b(b.S,p,{BYTES_PER_ELEMENT:l}),b(b.S+b.F*m(function(){a.of.call(d,1)}),p,{from:Tt,of:Mt}),V in s||S(s,V,l),b(b.P,p,Rt),M(p),b(b.P+b.F*Et,p,{set:Ct}),b(b.P+b.F*!v,p,Dt),s.toString!=pt&&(s.toString=pt),b(b.P+b.F*m(function(){new d(1).slice()}),p,{slice:Nt}),b(b.P+b.F*(m(function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()})||!m(function(){s.toLocaleString.call([1,2])})),p,{toLocaleString:$t}),A[p]=v?f:g,v||S(s,vt,g)}}else t.exports=function(){}});tu("Int8",1,function(r){return function(t,e,n){return r(this,t,e,n)}}),tu("Uint8",1,function(r){return function(t,e,n){return r(this,t,e,n)}}),tu("Uint8",1,function(r){return function(t,e,n){return r(this,t,e,n)}},!0),tu("Int16",2,function(r){return function(t,e,n){return r(this,t,e,n)}}),tu("Uint16",2,function(r){return function(t,e,n){return r(this,t,e,n)}}),tu("Int32",4,function(r){return function(t,e,n){return r(this,t,e,n)}}),tu("Uint32",4,function(r){return function(t,e,n){return r(this,t,e,n)}}),tu("Float32",4,function(r){return function(t,e,n){return r(this,t,e,n)}}),tu("Float64",8,function(r){return function(t,e,n){return r(this,t,e,n)}});var eu=(Ht.Reflect||{}).apply,nu=Function.apply;se(se.S+se.F*!Wt(function(){eu(function(){})}),"Reflect",{apply:function(t,e,n){var r=$(t),i=St(n);return eu?eu(r,e,i):nu.call(r,e,i)}});var ru=(Ht.Reflect||{}).construct,iu=Wt(function(){function t(){}return!(ru(function(){},[],t)instanceof t)}),ou=!Wt(function(){ru(function(){})});se(se.S+se.F*(iu||ou),"Reflect",{construct:function(t,e){$(t),St(e);var n=arguments.length<3?t:$(arguments[2]);if(ou&&!iu)return ru(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(qn.apply(t,r))}var i=n.prototype,o=Ce(Zt(i)?i:Object.prototype),a=Function.apply.call(t,o,e);return Zt(a)?a:o}}),se(se.S+se.F*Wt(function(){Reflect.defineProperty(Jt.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){St(t),e=Vt(e,!0),St(n);try{return Jt.f(t,e,n),!0}catch(t){return!1}}});var au=ze.f;se(se.S,"Reflect",{deleteProperty:function(t,e){var n=au(St(t),e);return!(n&&!n.configurable)&&delete t[e]}});function cu(t){this._t=St(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)}ci(cu,"Object",function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}}),se(se.S,"Reflect",{enumerate:function(t){return new cu(t)}}),se(se.S,"Reflect",{get:function t(e,n){var r,i,o=arguments.length<3?e:arguments[2];return St(e)===o?e[n]:(r=ze.f(e,n))?Yt(r,"value")?r.value:void 0!==r.get?r.get.call(o):void 0:Zt(i=kn(e))?t(i,n,o):void 0}}),se(se.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return ze.f(St(t),e)}}),se(se.S,"Reflect",{getPrototypeOf:function(t){return kn(St(t))}}),se(se.S,"Reflect",{has:function(t,e){return e in t}});var uu=Object.isExtensible;se(se.S,"Reflect",{isExtensible:function(t){return St(t),!uu||uu(t)}});var su=Ht.Reflect,fu=su&&su.ownKeys||function(t){var e=qe.f(St(t)),n=je.f;return n?e.concat(n(t)):e};se(se.S,"Reflect",{ownKeys:fu});var lu=Object.preventExtensions;se(se.S,"Reflect",{preventExtensions:function(t){St(t);try{return lu&&lu(t),!0}catch(t){return!1}}}),se(se.S,"Reflect",{set:function t(e,n,r){var i,o,a=arguments.length<4?e:arguments[3],c=ze.f(St(e),n);if(!c){if(Zt(o=kn(e)))return t(o,n,r,a);c=Xt(0)}if(Yt(c,"value")){if(!1===c.writable||!Zt(a))return!1;if(i=ze.f(a,n)){if(i.get||i.set||!1===i.writable)return!1;i.value=r,Jt.f(a,n,i)}else Jt.f(a,n,Xt(0,r));return!0}return void 0!==c.set&&(c.set.call(a,r),!0)}}),Tn&&se(se.S,"Reflect",{setPrototypeOf:function(t,e){Tn.check(t,e);try{return Tn.set(t,e),!0}catch(t){return!1}}});var hu=re(!0);se(se.P,"Array",{includes:function(t){return hu(this,t,1<arguments.length?arguments[1]:void 0)}}),wo("includes");xt.Array.includes;var pu=le("isConcatSpreadable");var du=function t(e,n,r,i,o,a,c,u){for(var s,f,l=o,h=0,p=!!c&&te(c,u,3);h<i;){if(h in r){if(s=p?p(r[h],h,n):r[h],f=!1,Zt(s)&&(f=void 0!==(f=s[pu])?!!f:Ae(s)),f&&0<a)l=t(e,n,s,xe(s.length),l,a-1)-1;else{if(9007199254740991<=l)throw TypeError();e[l]=s}l++}h++}return l};se(se.P,"Array",{flatMap:function(t){var e,n,r=ie(this);return $(t),e=xe(r.length),n=eo(r,0),du(n,r,r,e,0,1,t,arguments[1]),n}}),wo("flatMap");function vu(t,e,n,r){var i=String(Nt(t)),o=i.length,a=void 0===n?" ":String(n),c=xe(e);if(c<=o||""==a)return i;var u=c-o,s=_r.call(a,Math.ceil(u/a.length));return s.length>u&&(s=s.slice(0,u)),r?s+i:i+s}xt.Array.flatMap;var gu=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(oc);se(se.P+se.F*gu,"String",{padStart:function(t){return vu(this,t,1<arguments.length?arguments[1]:void 0,!0)}});xt.String.padStart;var yu=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(oc);se(se.P+se.F*yu,"String",{padEnd:function(t){return vu(this,t,1<arguments.length?arguments[1]:void 0,!1)}});xt.String.padEnd;Xn("trimLeft",function(t){return function(){return t(this,1)}},"trimStart");xt.String.trimLeft;Xn("trimRight",function(t){return function(){return t(this,2)}},"trimEnd");xt.String.trimRight;$t("asyncIterator");de.f("asyncIterator");se(se.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=Ct(t),i=ze.f,o=fu(r),a={},c=0;o.length>c;)void 0!==(n=i(r,e=o[c++]))&&Ui(a,e,n);return a}});xt.Object.getOwnPropertyDescriptors;function mu(c){return function(t){for(var e,n=Ct(t),r=Pe(n),i=r.length,o=0,a=[];o<i;)e=r[o++],Kt&&!bu.call(n,e)||a.push(c?[e,n[e]]:n[e]);return a}}var bu=Le.f,wu=mu(!1);se(se.S,"Object",{values:function(t){return wu(t)}});xt.Object.values;var xu=mu(!0);se(se.S,"Object",{entries:function(t){return xu(t)}});xt.Object.entries;se(se.P+se.R,"Promise",{finally:function(e){var n=va(this,xt.Promise||Ht.Promise),t="function"==typeof e;return this.then(t?function(t){return Ha(n,e()).then(function(){return t})}:e,t?function(t){return Ha(n,e()).then(function(){throw t})}:e)}});xt.Promise.finally;function Su(i){return function(t,e){var n=2<arguments.length,r=n&&_u.call(arguments,2);return i(n?function(){("function"==typeof t?t:Function(t)).apply(this,r)}:t,e)}}var _u=[].slice,ku=/MSIE .\./.test(oc);se(se.G+se.B+se.F*ku,{setTimeout:Su(Ht.setTimeout),setInterval:Su(Ht.setInterval)}),se(se.G+se.B,{setImmediate:Da.set,clearImmediate:Da.clear});for(var Eu=le("iterator"),Fu=le("toStringTag"),Ou=oi.Array,Pu={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},ju=Pe(Pu),Lu=0;Lu<ju.length;Lu++){var Au,Tu=ju[Lu],Mu=Pu[Tu],Iu=Ht[Tu],$u=Iu&&Iu.prototype;if($u&&($u[Eu]||Qt($u,Eu,Ou),$u[Fu]||Qt($u,Fu,Tu),oi[Tu]=Ou,Mu))for(Au in Ao)$u[Au]||At($u,Au,Ao[Au],!0)}e(function(t){var e=function(o){var u,t=Object.prototype,s=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},i=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",r=e.toStringTag||"@@toStringTag";function a(t,e,n,r){var i=e&&e.prototype instanceof c?e:c,o=Object.create(i.prototype),a=new O(r||[]);return o._invoke=function(o,a,c){var u=l;return function(t,e){if(u===p)throw new Error("Generator is already running");if(u===d){if("throw"===t)throw e;return j()}for(c.method=t,c.arg=e;;){var n=c.delegate;if(n){var r=k(n,c);if(r){if(r===v)continue;return r}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(u===l)throw u=d,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);u=p;var i=f(o,a,c);if("normal"===i.type){if(u=c.done?d:h,i.arg===v)continue;return{value:i.arg,done:c.done}}"throw"===i.type&&(u=d,c.method="throw",c.arg=i.arg)}}}(t,n,a),o}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}o.wrap=a;var l="suspendedStart",h="suspendedYield",p="executing",d="completed",v={};function c(){}function g(){}function y(){}var m={};m[i]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(P([])));w&&w!==t&&s.call(w,i)&&(m=w);var x=y.prototype=c.prototype=Object.create(m);function S(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function _(u){var e;this._invoke=function(n,r){function t(){return new Promise(function(t,e){!function e(t,n,r,i){var o=f(u[t],u,n);if("throw"!==o.type){var a=o.arg,c=a.value;return c&&"object"==typeof c&&s.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):Promise.resolve(c).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,i)})}i(o.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function k(t,e){var n=t.iterator[e.method];if(n===u){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=u,k(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var r=f(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,v;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=u),e.delegate=null,v):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function F(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function P(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(s.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=u,t.done=!0,t};return r.next=r}}return{next:j}}function j(){return{value:u,done:!0}}return g.prototype=x.constructor=y,y.constructor=g,y[r]=g.displayName="GeneratorFunction",o.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},o.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,r in t||(t[r]="GeneratorFunction")),t.prototype=Object.create(x),t},o.awrap=function(t){return{__await:t}},S(_.prototype),_.prototype[n]=function(){return this},o.AsyncIterator=_,o.async=function(t,e,n,r){var i=new _(a(t,e,n,r));return o.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},S(x),x[r]="Generator",x[i]=function(){return this},x.toString=function(){return"[object Generator]"},o.keys=function(n){var r=[];for(var t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},o.values=P,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(F),!t)for(var e in this)"t"===e.charAt(0)&&s.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=u)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=u),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=s.call(i,"catchLoc"),c=s.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),F(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;F(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=u),v}},o}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}});function Ru(r,i,t){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(r),void 0===i)return r;switch(t){case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}function Nu(t){return"object"==typeof t?null!==t:"function"==typeof t}function Cu(t){if(!Nu(t))throw TypeError(t+" is not an object!");return t}function Du(t){try{return!!t()}catch(t){return!0}}var qu=e(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),Uu=e(function(t){var e=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=e)}),Bu=(Uu.version,!Du(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),Gu=qu.document,Wu=Nu(Gu)&&Nu(Gu.createElement),Vu=!Bu&&!Du(function(){return 7!=Object.defineProperty(function(t){return Wu?Gu.createElement(t):{}}("div"),"a",{get:function(){return 7}}).a}),zu=Object.defineProperty,Hu={f:Bu?Object.defineProperty:function(t,e,n){if(Cu(t),e=function(t,e){if(!Nu(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!Nu(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!Nu(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!Nu(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(e,!0),Cu(n),Vu)try{return zu(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},Yu=Bu?function(t,e,n){return Hu.f(t,e,function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}(1,n))}:function(t,e,n){return t[e]=n,t},Ku={}.hasOwnProperty,Zu="prototype",Ju=function(t,e,n){var r,i,o,a,c,u=t&Ju.F,s=t&Ju.G,f=t&Ju.S,l=t&Ju.P,h=t&Ju.B,p=t&Ju.W,d=s?Uu:Uu[e]||(Uu[e]={}),v=d[Zu],g=s?qu:f?qu[e]:(qu[e]||{})[Zu];for(r in s&&(n=e),n)(i=!u&&g&&void 0!==g[r])&&(a=d,c=r,Ku.call(a,c))||(o=i?g[r]:n[r],d[r]=s&&"function"!=typeof g[r]?n[r]:h&&i?Ru(o,qu):p&&g[r]==o?function(r){function t(t,e,n){if(this instanceof r){switch(arguments.length){case 0:return new r;case 1:return new r(t);case 2:return new r(t,e)}return new r(t,e,n)}return r.apply(this,arguments)}return t[Zu]=r[Zu],t}(o):l&&"function"==typeof o?Ru(Function.call,o):o,l&&((d.virtual||(d.virtual={}))[r]=o,t&Ju.R&&v&&!v[r]&&Yu(v,r,o)))};Ju.F=1,Ju.G=2,Ju.S=4,Ju.P=8,Ju.B=16,Ju.W=32,Ju.U=64,Ju.R=128;Ju(Ju.G,{global:qu});var Xu,Qu=Uu.global,ts=e(function(t){var e,n=(e=Qu)&&e.__esModule?e:{default:e};n.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),n.default._babelPolyfill=!0});(Xu=ts)&&Xu.__esModule&&Object.prototype.hasOwnProperty.call(Xu,"default")&&Xu.default;var es=require("commander"),ns=new bt;return process.on("SIGINT",function(){ns.emit("shutdown")}),es.version("v0.17.0").option("-v, --verbose","log verbose output").option("-f, --file","Add Filename and optional new filepath").option("-e, --env","Add environment variable"),es.command("new <projectName>").description("Create a new Quire project in the current directory.").action(function(t){ns.verbose=es.verbose,ns.emit("new",t)}),es.command("preview [options]").description("Run the preview server in the current directory").action(function(){ns.verbose=es.verbose,ns.emit("preview")}),es.command("install").description("Install this project's theme dependencies").action(function(){ns.verbose=es.verbose,ns.emit("install")}),es.command("site [env]").option("-e, --env","Add environment variable").alias("build").description("Run the build command in the current directory").action(function(t){ns.verbose=es.verbose,ns.emit("site",t)}),es.command("pdf [file] [env]").option("-f, --file","Add Filename and optional new filepath").option("-e, --env","Add environment variable").description("Generate a PDF version of the current project").action(function(t,e){ns.verbose=es.verbose,ns.emit("pdf",t,e)}),es.command("epub [file] [env]").option("-f, --file","Add Filename and optional new filepath").option("-e, --env","Add environment variable").description("Generate an EPUB version of the current project").action(function(t,e){ns.verbose=es.verbose,ns.emit("epub",t,e)}),es.command("mobi [file] [env]").option("-f, --file","Add Filename and optional new filepath").option("-e, --env","Add environment variable").description("Generate an MOBI version of the current project").action(function(t,e){ns.verbose=es.verbose,ns.emit("mobi",t,e)}),es.command("template [type]").option("-t, --type","Select template to download (Currently only EPUB supported)").description("Download templates to customize your file output (Currently only EPUB supported)").action(function(t){ns.verbose=es.verbose,ns.emit("template",t)}),es.command("debug").description("Development use only - log info about current project").action(function(){ns.verbose=es.verbose,ns.emit("debug")}),es.parse(process.argv),t.commandMissing=T,t.deleteFolderRecursive=function r(i){O.existsSync(i)&&(O.readdirSync(i).forEach(function(t,e){var n=i+"/"+t;O.statSync(n).isDirectory()?r(n):O.unlinkSync(n)}),O.rmdirSync(i))},t.determineBaseURL=M,t.readYAML=A,t}({});
